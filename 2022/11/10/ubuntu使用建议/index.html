<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://pic.imgdb.cn/item/66ab69ecd9c307b7e945ca17.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://pic.imgdb.cn/item/66ab69ecd9c307b7e945ca17.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"wonderlandkid.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.18.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="最开始这里仅仅是一个20.04的问题解决文章集合. 随着时间的推移, 也遇到了更多问题和更多补充的内容, 所以今天将这篇文章标题和内容进行重写. 这些问题的解决顺序还是希望按照时间来排序, 也就是有一些操作可能会影响后续问题的解决. 本文除开特别标注部分, 指的都是gnome版本的官方Ubuntu镜像.">
<meta property="og:type" content="article">
<meta property="og:title" content="ubuntu使用建议">
<meta property="og:url" content="http://wonderlandkid.github.io/2022/11/10/ubuntu%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE/index.html">
<meta property="og:site_name" content="wonderlandKid的小窝">
<meta property="og:description" content="最开始这里仅仅是一个20.04的问题解决文章集合. 随着时间的推移, 也遇到了更多问题和更多补充的内容, 所以今天将这篇文章标题和内容进行重写. 这些问题的解决顺序还是希望按照时间来排序, 也就是有一些操作可能会影响后续问题的解决. 本文除开特别标注部分, 指的都是gnome版本的官方Ubuntu镜像.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic.imgdb.cn/item/626d5491239250f7c58e0bd2.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/13914967/52464615-8cee9900-2bb6-11e9-8aa3-a74d8cf7bea5.png">
<meta property="article:published_time" content="2022-11-10T14:30:09.000Z">
<meta property="article:modified_time" content="2024-11-06T00:26:46.059Z">
<meta property="article:author" content="wonderlandKid">
<meta property="article:tag" content="study">
<meta property="article:tag" content="linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.imgdb.cn/item/626d5491239250f7c58e0bd2.png">


<link rel="canonical" href="http://wonderlandkid.github.io/2022/11/10/ubuntu%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://wonderlandkid.github.io/2022/11/10/ubuntu%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE/","path":"2022/11/10/ubuntu使用建议/","title":"ubuntu使用建议"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>ubuntu使用建议 | wonderlandKid的小窝</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">wonderlandKid的小窝</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text"> 前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96%E9%83%A8%E5%88%86"><span class="nav-text"> 系统优化部分</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E9%97%AD%E9%BB%98%E8%AE%A4%E6%8C%89%E9%94%AE"><span class="nav-text"> 关闭默认按键</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#btrfsb-tree-filesystem%E5%92%8Ctimeshift"><span class="nav-text"> btrfs(B-tree filesystem)和timeshift</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#wayland%E5%92%8Cx11"><span class="nav-text"> wayland和X11</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%81%94%E7%BD%91-%E6%8D%A2%E6%BA%90-%E8%AE%BE%E7%BD%AE%E6%97%B6%E9%97%B4-%E6%9B%B4%E6%94%B9root%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81-%E6%9B%B4%E6%94%B9%E5%AE%B6%E7%9B%AE%E5%BD%95%E4%B8%AD%E8%8B%B1%E6%96%87"><span class="nav-text"> 联网 换源 设置时间 更改root用户密码 更改家目录中英文</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E6%B3%95"><span class="nav-text"> 输入法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%94%E8%AE%B0%E6%9C%AC%E4%B8%8A%E5%AD%97%E4%BD%93%E5%A4%AA%E5%B0%8F"><span class="nav-text"> 笔记本上字体太小</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nvidia-drivers"><span class="nav-text"> NVIDIA-drivers</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BD%AF%E4%BB%B6%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E5%92%8C%E6%8E%A8%E8%8D%90"><span class="nav-text"> 软件相关问题和推荐</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#wps"><span class="nav-text"> wps</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#netease-cloud-music-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90"><span class="nav-text"> netease-cloud-music 网易云音乐</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#qq%E5%92%8C%E6%9B%BF%E4%BB%A3%E5%93%81icalingua"><span class="nav-text"> QQ和替代品icalingua++</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%85%E9%9B%B7-xunlei"><span class="nav-text"> 迅雷 xunlei</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AC%A7%E8%B7%AF%E8%AF%8D%E5%85%B8appimage%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8"><span class="nav-text"> 欧路词典(appimage无法使用)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E6%94%B9%E7%B3%BB%E7%BB%9F%E7%9A%84%E9%BB%98%E8%AE%A4%E7%BC%96%E8%BE%91%E8%BD%AF%E4%BB%B6"><span class="nav-text"> 更改系统的默认编辑软件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%89%93%E5%AD%97%E9%87%8D%E5%A4%8D%E9%94%AE%E7%9A%84%E5%BB%B6%E8%BF%9F%E5%92%8C%E9%80%9F%E5%BA%A6"><span class="nav-text"> 什么是打字重复键的延迟和速度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%99ubuntu%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%BB%88%E7%AB%AF"><span class="nav-text"> 给ubuntu使用一个更好的终端</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nodejs-%E5%92%8C-npm%E4%BD%BF%E7%94%A8nvm%E5%AE%89%E8%A3%85"><span class="nav-text"> nodejs 和 npm(使用nvm安装)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tldr-too-long-dont-read"><span class="nav-text"> tldr: too long don’t read</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%AF%E8%83%BD%E6%94%B9%E5%96%84%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%94%B5%E8%84%91%E7%9A%84%E7%BB%AD%E8%88%AA%E9%97%AE%E9%A2%98"><span class="nav-text"> 可能改善笔记本电脑的续航问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nala-%E4%B8%80%E4%B8%AA%E7%A8%8D%E5%BE%AE%E7%BE%8E%E4%B8%BD%E7%9A%84apt%E5%89%8D%E7%AB%AF"><span class="nav-text"> nala: 一个稍微美丽的apt前端</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#clang%E7%BC%96%E8%AF%91%E6%89%BE%E4%B8%8D%E5%88%B0%E5%A4%B4%E6%96%87%E4%BB%B6"><span class="nav-text"> clang编译找不到头文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%8E%E8%AE%B0"><span class="nav-text"> 后记</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="wonderlandKid"
      src="https://pic.imgdb.cn/item/66ab69ecd9c307b7e945ca17.png">
  <p class="site-author-name" itemprop="name">wonderlandKid</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">30</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://wonderlandkid.github.io/2022/11/10/ubuntu%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://pic.imgdb.cn/item/66ab69ecd9c307b7e945ca17.png">
      <meta itemprop="name" content="wonderlandKid">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wonderlandKid的小窝">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="ubuntu使用建议 | wonderlandKid的小窝">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ubuntu使用建议
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-11-10 22:30:09" itemprop="dateCreated datePublished" datetime="2022-11-10T22:30:09+08:00">2022-11-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-11-06 08:26:46" itemprop="dateModified" datetime="2024-11-06T08:26:46+08:00">2024-11-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>最开始这里仅仅是一个20.04的问题解决文章集合. 随着时间的推移, 也遇到了更多问题和更多补充的内容, 所以今天将这篇文章标题和内容进行重写.</p>
<p>这些问题的解决顺序还是希望按照时间来排序, 也就是有一些操作可能会影响后续问题的解决.</p>
<p><strong>本文除开特别标注部分, 指的都是gnome版本的官方Ubuntu镜像.</strong></p>
<span id="more"></span>
<h1 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h1>
<p>written in:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">            .-/+oossssoo+/-.               liu@liu-Swift-SFX14-41G </span><br><span class="line">        `:+ssssssssssssssssss+:`           ----------------------- </span><br><span class="line">      -+ssssssssssssssssssyyssss+-         OS: Ubuntu 22.10 x86_64 </span><br><span class="line">    .ossssssssssssssssssdMMMNysssso.       Host: Swift SFX14-41G V1.00 </span><br><span class="line">   /ssssssssssshdmmNNmmyNMMMMhssssss/      Kernel: 5.19.0-29-generic </span><br><span class="line">  +ssssssssshmydMMMMMMMNddddyssssssss+     Uptime: 40 mins </span><br><span class="line"> /sssssssshNMMMyhhyyyyhmNMMMNhssssssss/    Packages: 1719 (dpkg) </span><br><span class="line">.ssssssssdMMMNhsssssssssshNMMMdssssssss.   Shell: zsh 5.9 </span><br><span class="line">+sssshhhyNMMNyssssssssssssyNMMMysssssss+   Resolution: 1920x1080 </span><br><span class="line">ossyNMMMNyMMhsssssssssssssshmmmhssssssso   DE: GNOME 43.1 </span><br><span class="line">ossyNMMMNyMMhsssssssssssssshmmmhssssssso   WM: Mutter </span><br><span class="line">+sssshhhyNMMNyssssssssssssyNMMMysssssss+   WM Theme: Adwaita </span><br><span class="line">.ssssssssdMMMNhsssssssssshNMMMdssssssss.   Theme: Yaru-dark [GTK2/3] </span><br><span class="line"> /sssssssshNMMMyhhyyyyhdNMMMNhssssssss/    Icons: Yaru-dark [GTK2/3] </span><br><span class="line">  +sssssssssdmydMMMMMMMMddddyssssssss+     Terminal: x-terminal-emul </span><br><span class="line">   /ssssssssssshdmNNNNmyNMMMMhssssss/      CPU: AMD Ryzen 7 5700U 4.372GHz </span><br><span class="line">    .ossssssssssssssssssdMMMNysssso.       GPU: AMD ATI 05:00.0 Lucienne </span><br><span class="line">      -+sssssssssssssssssyyyssss+-         GPU: NVIDIA GeForce GTX 1650</span><br><span class="line">        `:+ssssssssssssssssss+:`           Memory: 2255MiB / 15328MiB </span><br><span class="line">            .-/+oossssoo+/-.</span><br></pre></td></tr></table></figure>
<p>有时候系统做了一些更改之后, 比如说装完字体应用里面还是找不到, 这个时候善用重启.</p>
<h1 id="系统优化部分"><a class="markdownIt-Anchor" href="#系统优化部分"></a> 系统优化部分</h1>
<h2 id="关闭默认按键"><a class="markdownIt-Anchor" href="#关闭默认按键"></a> 关闭默认按键</h2>
<p>很多人不想使用win+number的形式来打开快捷栏, 比如说我, 我使用win+2来切换到工作区2, 所以必须关闭这个快捷键. <a target="_blank" rel="noopener" href="https://askubuntu.com/questions/968103/disable-the-default-app-key-supernum-functionality-on-ubuntu-17-10-and-later">参考文章</a>.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gsettings set org.gnome.shell.extensions.dash-to-dock hot-keys false</span><br><span class="line">for i in $(seq 1 9); do gsettings set org.gnome.shell.keybindings switch-to-application-$&#123;i&#125; &#x27;[]&#x27;; done</span><br></pre></td></tr></table></figure>
<h2 id="btrfsb-tree-filesystem和timeshift"><a class="markdownIt-Anchor" href="#btrfsb-tree-filesystem和timeshift"></a> btrfs(B-tree filesystem)和timeshift</h2>
<p>在安装ubuntu的时候, 在选取主分区的时候默认都是使用ext4作为<strong>文件系统</strong>. 常年在Windows下面待确实让我对文件系统的理解没有什么. Windows默认是使用NTFS的文件系统. 文件系统的不同决定了文件在磁盘里面如何存储. 对于linux来说, 经常会用到备份(每次整大活之前先把系统拍个照片, 万一大活整烂了还可以像时光机器一样回滚到快照的时候). 和ext4相比, btrfs的最显著的优势就是方便备份. ext4备份的话需要复制很多文件, 而btrfs是一种比较奇特的方式, 可以瞬间完成备份, 也不用进行复杂的文件赋值. 恢复备份的时候也是瞬间恢复, 这给折腾Linux提供很多便利.</p>
<p>更加细节的东西可以参看学长的博客:<a target="_blank" rel="noopener" href="https://blog.kaaass.net/archives/1748">点此</a></p>
<p>timeshift是一个备份的软件, 即使你没有使用btrfs作为文件系统, 使用timeshift经常备份也是一个好习惯.</p>
<h2 id="wayland和x11"><a class="markdownIt-Anchor" href="#wayland和x11"></a> wayland和X11</h2>
<p>这两者之间我也不是很懂, 但是确定的是, wayland是近年来新出现的协议, 带来一些新功能新改变. 但是有一些软件在这个下面表现不佳, 好像腾讯会议就是这个典型. 所以在进入ubuntu图形化界面的时候还是推荐选择x11而不是wayland. <strong>在ubuntu的设置-&gt;关于-&gt;窗口系统这一栏里面可以看到现在是不是x11</strong>. 在登录页面的右下角有一个设置一样的按钮. 选的时候选ubuntu on xorg, 不要选ubuntu on wayland.(有的时候只会显示ubuntu, 但是不管怎么样肯定有一个显示全了的, 反正能选出来). 有时候软件打不开等奇怪的bug就是wayland导致的.</p>
<h2 id="联网-换源-设置时间-更改root用户密码-更改家目录中英文"><a class="markdownIt-Anchor" href="#联网-换源-设置时间-更改root用户密码-更改家目录中英文"></a> 联网 换源 设置时间 更改root用户密码 更改家目录中英文</h2>
<p>这一系列东西基本上是必做的. 首先是换源问题, 这个其实现在也淡化了, 因为如果现在安装ubuntu的话, ubuntu会分配ubuntucn源, 速度也是挺快. 早期换源主要是因为ubuntu的服务器在国外, 安装软件包会不方便, 所以需要使用国内的镜像站(每隔一段时间copy原站, 给国内用户提供linux软件源服务, 也包括镜像的下载, 出名的包括清华大学开源镜像站). 如果对这一步不是很确定怎么做或者说觉得自己<code>sudo apt install</code>的速度足够快, 就不需要换了.</p>
<p>在时间问题上, linux默认使用<strong>协调世界时</strong>. 所以安装完系统时间会不对, 和现在时间相隔八小时. 但是近年来ubuntu都有联网校准时间功能, 只要连上网之后时间就会自动校准, 但是这样还是治标不治本. 如果ubuntu的时间对那么可以重启回Windows看看, 如果Windows时间也是对(当然你不能联网)那么才说明不存在这个问题. 否则需要让ubuntu使用本地时间:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo timedatectl set-local-rtc 1</span><br></pre></td></tr></table></figure>
<p>总之就是在断网的情况下来回启动两个系统, 来印证此问题的解决.</p>
<p>设置完之后可以使用<code>sudo timedatectl</code>来查看时间的信息, 当然这里会有warning, 说明ubuntu建议还是使用协调世界时.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo timedatectl</span><br><span class="line">               Local time: 日 2023-02-05 22:31:30 CST</span><br><span class="line">           Universal time: 日 2023-02-05 14:31:30 UTC</span><br><span class="line">                 RTC time: 日 2023-02-05 22:31:31</span><br><span class="line">                Time zone: Asia/Shanghai (CST, +0800)</span><br><span class="line">System clock synchronized: <span class="built_in">yes</span></span><br><span class="line">              NTP service: active</span><br><span class="line">          RTC <span class="keyword">in</span> <span class="built_in">local</span> TZ: <span class="built_in">yes</span></span><br><span class="line"></span><br><span class="line">Warning: The system is configured to <span class="built_in">read</span> the RTC time <span class="keyword">in</span> the <span class="built_in">local</span> time zone.</span><br><span class="line">         This mode cannot be fully supported. It will create various problems</span><br><span class="line">         with time zone changes and daylight saving time adjustments. The RTC</span><br><span class="line">         time is never updated, it relies on external facilities to maintain it.</span><br><span class="line">         If at all possible, use RTC <span class="keyword">in</span> UTC by calling</span><br><span class="line">         <span class="string">&#x27;timedatectl set-local-rtc 0&#x27;</span>.</span><br></pre></td></tr></table></figure>
<p>完成设置时间后, 重启回Windows矫正一次时间, 之后双系统就不会出现时间问题了.</p>
<p>然后就是root用户密码的问题. 在linux里面, 权限最高的用户是root用户. sudo的意思就是super user do, 是让当前用户拥有root的权限. 关键问题是<strong>当前用户拥有root权限并不等于root用户</strong>. 有一些脚本是写死了使用root用户来执行了, 因为对于脚本的开发者来说root用户能够改变一些系统设置. 比如吉林大学的校园网的linux脚本, 默认就是使用root用户来执行. <strong>注意并不是root权限的普通用户, 或者说并不是sudo.</strong> 这种情况下它让你输入密码的时候输入的是root密码, 但是ubuntu的root用户默认没有设置密码.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br><span class="line">passwd</span><br></pre></td></tr></table></figure>
<p>想设置root用户密码, 首先得是root用户, 切换到root用户却需要密码, 这怎么办? 这个时候就是sudo了, 因为sudo能够让普通用户用自己的密码拿到root权限, 通过这个权限的提高直接进入root用户即可. 然后成为root用户之后再passwd就可以更改密码了. (因为用户最高, 即使它说你密码安全性不够也不用管它, 照常输入两边它还是听你的). 你可以使用<code>whoami</code>来打印当前用户的名字.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ <span class="built_in">whoami</span></span><br><span class="line">liu</span><br><span class="line">➜  ~ sudo su         </span><br><span class="line">root@liu-Swift-SFX14-41G:/home/liu: <span class="built_in">whoami</span></span><br><span class="line">root</span><br></pre></td></tr></table></figure>
<p>而如果你使用中文安装ubuntu, 那你的家目录会全都是中文, 但是对于linux user来说这是很糟糕的一件事, 终端里面还要切输入法是十分抽象的. 所幸可以使用<code>xdg-user-dirs-gtk-update</code>工具来修改我们的家目录是否是中英文. 这是一个命令行工具. 要查看当前的语言环境, 你也可以打开终端, 输入<code>echo $LANG</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ <span class="built_in">echo</span> <span class="variable">$LANG</span> <span class="comment">#因为我后天改过所以这里没有输出中文, 正常中文安装之后会显示zh_CN之类的</span></span><br><span class="line">en_US.UTF-8</span><br></pre></td></tr></table></figure>
<p>这个时候输入<code>xdg-user-dirs-gtk-update</code>肯定没用, 因为你本来就是中文的环境. 而按照下面的方式输入:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> LANG=en_US <span class="comment"># 这条命令可以临时改变终端的语言环境为英文</span></span><br><span class="line">xdg-user-dirs-gtk-update <span class="comment"># 此时运行检测到环境为英文</span></span><br></pre></td></tr></table></figure>
<p>然后会弹出窗口提示更新名称, 然后更新, 下次开机的时候又会提醒是否更新名称, 那为什么又会弹窗呢? 因为我们只是临时改变了<code>$LANG</code>的值, 重新开机的时候它又知道自己是中文. 这个时候点不更新然后点不再提醒就好了. 之后家目录就可以很方便地变成英文. (当然我也没有试过是不是可以直接换, 直接创建文件夹)</p>
<h2 id="输入法"><a class="markdownIt-Anchor" href="#输入法"></a> 输入法</h2>
<p>ubuntu自带的输入法是<code>ibus-rime</code>, 我的评价是很难用, 而且没有词库. 我建议直接放弃使用ibus-rime. 更加重要的一点就是, ibus无法在pycharm里面正常使用输入? 况且我们有fcitx这个搜狗输入法可以用为什么不用呢?</p>
<p>这里ibus是输入法框架, rime是输入法的名字. 我最后使用fcitx作为输入法框架, sogoupinyin作为输入法. 当然也有很多人选择更加先进的fcitx5作为输入法框架, 搭配其他的输入法. 但是说实话, 感觉不如搜狗输入法.</p>
<p>对于一些执意要使用ibus-rime的人, 使用ibus有可能会出现输入框无法跟随光标的问题, 据说是因为gnome的bug. 这种情况有一个尝试方案: <a target="_blank" rel="noopener" href="https://www.ipangbo.cn/linux/264.html">点此</a></p>
<p><strong>但是注意</strong>! 因为这个方法修改了环境变量, 会导致将来试图安装fcitx一类输入法的时候老是出现莫名奇妙的问题!! 我一开始使用的是ubuntu自带的中文输入法ibus-rime, 也出现了输入法不跟着光标的问题, 然后按照文章说的修改了环境变量, 后来我想用搜狗输入法因为更好用, 发现fcitx怎么都没法用, 后来才想起来是这里多了一个环境变量的shell程序. 所以对于用了root权限的命令都要知道它的作用和后果, 假如要转fcitx输入法的时候一定要把和ibus有关的东西搞干净. <strong>对于自己的系统一定要负责, 尤其是没有备份的情况下, 每一步sudo命令都尽量理解这些命令做了什么, 否则更改了某个设置结果忘了, 对日后产生一些影响却一直想不起来设置已经不是默认的设置了, 所以看别人的教程也没用了</strong>.</p>
<p>在ubuntu上面使用搜狗输入法: <a target="_blank" rel="noopener" href="https://blog.csdn.net/Mr_Sudo/article/details/124874239">点此</a>. 如果使用搜狗输入法就装fcitx4, 不要fcitx5. 然后就是教程里面有一点, <strong>设置fcitx开机启动的那一步是不必要的</strong>. 再就是因为ibus本身是集成在系统里面的, 卸载的时候一定要看清楚, 不要不小心把桌面的一些部件也一起卸载了, 如果按照这个blog里面的命令来的话应该是没有这些问题的. 如果对于自己的能力不够自信, <strong>建议就不要卸载ibus输入法了</strong>, 这个包虽然用不上了你也可以留着, 如果不在乎这点磁盘空间的话.全了的, 反正能选出来)</p>
<h2 id="笔记本上字体太小"><a class="markdownIt-Anchor" href="#笔记本上字体太小"></a> 笔记本上字体太小</h2>
<p>有人会在设置-&gt;显示器里面调整缩放, 但是对于我的笔记本来说啊, 就是它只能够100%或者是200%. 如果我开启其他倍数缩放又会让字体变模糊.</p>
<p>解决办法就是安装<code>gnome-tweaks</code>: (在较早的版本这个好像叫做gnome-tweakstools, 记不得了, 总之就是装完是一个&quot;优化&quot;名字的软件)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install gnome-tweaks</span><br></pre></td></tr></table></figure>
<p>在应用程序里面找到&quot;优化&quot;点开, 然后找到字体这一栏, 缩放比例拉到1.5.</p>
<h2 id="nvidia-drivers"><a class="markdownIt-Anchor" href="#nvidia-drivers"></a> NVIDIA-drivers</h2>
<p>首先, 一般会在安装的时候自动安装好. 检验安装好没常用手段是<code>nvidia-smi</code>. 显卡问题稍微严重一点的可能连ubuntu的安装程序都没办法启动, 这个时候开机的时候要选<strong>safe graphic</strong>一栏.(哎这个是不是应该拿到开头才对, 是不是说晚了).</p>
<p>假如出现了刚安装完nvidia-smi有显示, 更新之后没有, 这种情况就很玄学, 好像过会就好了. 换源之后update, 然后有一个附加驱动的软件, 那里面会有推荐的驱动(后面有一个tested)</p>
<p>如果最后显卡驱动都安置妥当, 再说双显卡如何切换. 可以在命令行里面通过prime-select来切换显卡模式:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo prime-select query #查询当前显卡处于什么模式</span><br><span class="line">sudo prime-select nvidia #切换到纯N卡独显模式</span><br><span class="line">sudo prime-select intel #切换到省电模式 这个模式下面nvidia-smi会提示找不到N卡这是正常的 即使是amd好像也是通过这个命令来切换</span><br></pre></td></tr></table></figure>
<p>然后就是有的时候没有nvidia-setting. 假如需要一个nvidia设置可以直接apt install一个:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install nvidia-settings</span><br></pre></td></tr></table></figure>
<p>不过模式切换命令行就能解决就是了. 当然图形化设置也能切换:</p>
<p><img src="https://pic.imgdb.cn/item/626d5491239250f7c58e0bd2.png" alt="alt" /></p>
<p>值得一提的是, 在混合模式下如何指定应用用独立显卡打开. 根据ubuntu的<a target="_blank" rel="noopener" href="https://help.ubuntu.com/community/BinaryDriverHowto/Nvidia">官方文档</a>, 首先可以在混合(就是on-demand)模式下右键某软件, 点击使用独立显卡启动. 如果是在命令行下启动的程序, 可以使用下列命令:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__NV_PRIME_RENDER_OFFLOAD=1 __VK_LAYER_NV_optimus=NVIDIA_only __GLX_VENDOR_LIBRARY_NAME=nvidia &quot;here_command&quot;</span><br></pre></td></tr></table></figure>
<p>是不是看上去很麻烦, 所以有一个包叫做prime-run来简化操作, 但是就这篇文章写的时候好像这个包还没有给22.04用的? 就是在包的查询网页上面看到链接里面都是focal.</p>
<p>prime-run实际上也就是把这些参数进行一个封装(<a target="_blank" rel="noopener" href="https://askubuntu.com/questions/1364762/prime-run-command-not-found">可见此</a>), 所以按照上面的链接可以自己做一个prime-run的启动脚本. 但是关键问题在于对于ubuntu用户来说, 如果真的需要用显卡正儿八经打游戏直接切换到nvidia模式不香吗…</p>
<p>当然如果像这样启动发现并不理想, 明明用独显启动了为什么感觉性能这么差? 这个时候一种可能的解决方法就是去nvidia的setting里面看一眼, 在PowerMizer里面可以调节preferred mode. 这里一般是调到auto, 然后auto默认是adaptive, 把这里改成performance mode之后再看看混合模式下的N卡的性能.</p>
<p><s>我现在已经十分确信当时在manjaro下面mc运行着效果不行是这里就开了个adaptive mode, manjaro下面好像没有prime-select这样完全切到独显模式, 似乎默认就是混合模式, 所以即使使用了prime-on之类的命令如果不开性能模式好像玩mc屏幕撕裂很严重, 应该是这样的, 但是也没有验证, 不知道撕裂是因为没有开性能模式(我也不记得当时开了性能模式没有)还是因为本身那个混合驱动就不好用.</s></p>
<p>注: 后来去manjaro底下实测了一下, 即使就是开性能模式也不能让画面不撕裂, 真的怪起来了. 虽然我心里面清楚这个问题最后肯定能解决, 我到处问了一下说是可以调参数什么的, 但是一个默认的配置连MC都画面撕裂我是不能接受的. 这也是我回ubuntu的一个重要原因, 那就是在manjaro下面的默认配置不能够发挥显卡的全部性能.</p>
<p>再注: 后来装上arch自己之后, 包括试用过arcolinux等arch更加纯正的发行版, manjaro显卡性能差问题首先是没有使用官方的驱动, 而是使用一种混合驱动. 对于那些使用了官方驱动MC却还是画面撕裂的人来说, 是特效混成器的问题, 想办法在KDE或者是其他桌面环境里面设置下面启动一些防撕裂的选项可以显著改善这个情况. 然后使用<code>optimus-manager</code>进行显卡切换. 我的评价是不如<code>prime-select</code>. 首先后者直接集成在ubuntu系统里面, 而且能够彻底地进行显卡切换并且省电, 然后前者却是GitHub提供的(还不是官方), 安装之后需要进行一些文件的配置改动, 而且配置不好经常弹窗说会造成额外的功耗(虽然我觉得不应该会这样, 还是没搞清楚这玩意什么原理).</p>
<p>最后呢, 在不同模式之间切换需要注销再进桌面, 但是关于混合模式下adaptive模式改成performance模式需不需要注销没有试过, 目测是不需要的.</p>
<p>那么在ubuntu下面笔记本双显卡切换还是非常好使, 对比pop_os(一个基于ubuntu的发行版?)在切换显卡的时候需要等更长时间, 还需要重启, 这个注销切换的方式还是方便得多. 对比manjaro默认的驱动配置没法切换, arch的依赖社区的软件进行显卡切换还有bug. 可以说如果是N卡笔记本的linux发行版几乎没有第二个选择, 除非想要放弃双显卡切换这个很帅的功能.</p>
<h1 id="软件相关问题和推荐"><a class="markdownIt-Anchor" href="#软件相关问题和推荐"></a> 软件相关问题和推荐</h1>
<h2 id="wps"><a class="markdownIt-Anchor" href="#wps"></a> wps</h2>
<p>wps在最开始会出现22.04没法进入的问题, 现在wps for linux放出了一个更新版本来修复这个问题. 但是字体还是缺就是了.  缺字体的话, 可以去Windows字体目录下面找到所有字体, 然后全部安装到ubuntu上面, 这样肯定不会出现缺字体的问题. 这也是基操了, 刷新字体缓存<code>fc-cache -fv</code>, 以这个命令作为关键词就能够查到一些批量安装字体的教程.</p>
<h2 id="netease-cloud-music-网易云音乐"><a class="markdownIt-Anchor" href="#netease-cloud-music-网易云音乐"></a> netease-cloud-music 网易云音乐</h2>
<p><strong>如果真的想要听歌, 也可以使用lxmusic, GitHub上的一个播放软件项目, 非常不错.</strong></p>
<p>其中需要说一句网易云音乐的事情, 即使是修复好了如果是笔记本上面还可能会出现: 1. 屏幕缩放太小根本看不清. 2. 登陆之后首页加载不出来.</p>
<p>对于非要使用网易云音乐的朋友也还有一个解决方案, 在启动器里面(以ubuntu作为例子). 一般ubuntu用户是通过”所有应用程序”来启动应用, 这个应用的启动方式实际上在<code>/usr/share/applications</code>里面, 进去可以看到很多desktop后缀的文件. 那么找到网易云音乐相关的文件, <a target="_blank" rel="noopener" href="https://www.freesion.com/article/6842452116/">点此</a>, 就像这篇博客说的一样, 是可以的. Exec原来就是netease-cloud-music %U, 像文章里面那样给中间加上一些东西就可以实现强制的缩放.</p>
<p>但是其实有很多比网易云好用的听歌的替代品, 就比如<a target="_blank" rel="noopener" href="https://github.com/Rocket1184/electron-netease-cloud-music">electron-netease-cloud-music</a>, 效果是非常不错的, 详情可以去它的github地址看看. 以下图片引自github的页面:</p>
<p><img src="https://user-images.githubusercontent.com/13914967/52464615-8cee9900-2bb6-11e9-8aa3-a74d8cf7bea5.png" alt="img" /></p>
<p>不过这个图片因为是github上面的所以加载估计很慢… 反正界面就是这样了.</p>
<p>想要运行需要额外装上electron, 主要是我对于npm这个包管理器不太熟悉, 所以如果只是想用音乐软件, <code>sudo npm install electron -g</code>应该就是可以的. (关于npm和nodejs的问题推荐看后面一栏有一个nvm的问题, 如果不使用nvm可能会出现全局安装带来的一系列权限bug, 后患无穷. nvm也是官方推荐的一个很好的解决方式)</p>
<h2 id="qq和替代品icalingua"><a class="markdownIt-Anchor" href="#qq和替代品icalingua"></a> <s>QQ和替代品icalingua++</s></h2>
<p><strong>注: 现在已经有了electron版本的QQ, 可以传文件了.</strong></p>
<p><strong>再注: electron版本的QQ极其不稳定, 加之icalingua++多次更新功能也完善了, 不失为一个好的选择.</strong></p>
<p>如果是不想用替代品, tencent官方有一个linux版本的QQ. 但是当时用着基本上天天闪退, 后来在2020年4月1号有一个更新的版本, 事实证明还是非常难用, 基本上一接消息就闪退.</p>
<p>icalingua++不管怎么样, 不谈好不好用, 起码能用. <a target="_blank" rel="noopener" href="https://github.com/Icalingua-plus-plus/Icalingua-plus-plus/releases">icalingua的github</a>.</p>
<p>当然也有deepin-wine的解决方案, 这就多了, 但是我不喜欢这样.</p>
<h2 id="迅雷-xunlei"><a class="markdownIt-Anchor" href="#迅雷-xunlei"></a> 迅雷 xunlei</h2>
<p>虽然一般在用linux的人都有能力用一些”高级”一点的下载工具了, 但是有无脑的快速下载器为什么不用呢?</p>
<p>在aur的xunlei-bin里面的评论区, 有一个老哥提供了一个麒麟的deb包可以用<a target="_blank" rel="noopener" href="http://archive.kylinos.cn/kylin/partner/pool/com.xunlei.download_1.0.0.1_amd64.deb">点此</a>, 那个aur提供的deb包需要deepin的验证没法用.</p>
<h2 id="欧路词典appimage无法使用"><a class="markdownIt-Anchor" href="#欧路词典appimage无法使用"></a> 欧路词典(appimage无法使用)</h2>
<p>非常经典的问题, 就是欧路词典的deb包安装之后没有办法正常启动. 其实问题也很简单, 命令行启动的话很明显就能看出来是缺少库文件, 但是我还是理解不了那个英文报错. 所以最后还是选了appimage格式的包来. 暂定在这里, 以后要是看见了别的地方出了解决方法就把那个方法贴过来.</p>
<p>这里也是一个非常经典的问题, 那就是appimage运行的时候提示缺少fuse, 如果你apt install的话(至少在ubuntu22.10上面)就一下子会卸载很多跟桌面相关的包, 我一直没有胆量尝试, 最坏的情况就是下次开机直接进不了桌面了, 直接黑屏.</p>
<p>正确的解决方法是这样: <a target="_blank" rel="noopener" href="https://askubuntu.com/questions/1409496/how-to-install-safely-install-fuse-on-ubuntu-22-04">askubuntu</a>.</p>
<p>如果懒得点进去就省流:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libfuse2</span><br></pre></td></tr></table></figure>
<h2 id="更改系统的默认编辑软件"><a class="markdownIt-Anchor" href="#更改系统的默认编辑软件"></a> 更改系统的默认编辑软件</h2>
<p>nano个人认为没有vim好使. 提一嘴怎么更改默认的编辑软件, 所谓默认的编辑软件, 就是<code>/usr/bin/editor</code>这个是谁.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update-alternatives --config editor</span><br></pre></td></tr></table></figure>
<p>是有默认的工具来完成这件事情的.</p>
<h2 id="什么是打字重复键的延迟和速度"><a class="markdownIt-Anchor" href="#什么是打字重复键的延迟和速度"></a> 什么是打字重复键的延迟和速度</h2>
<p>也许很多人有这样的烦恼, 就是想要长按A键, 结果按了好久系统才出现一大长串A. 这个就是延迟, 就是按一个键被当成是长按之前给你的反应时间. 这个时间对于一些追求速度的人来讲还是要设置短一点, 不然突出表现就是vim里面长按J键到下一行之前需要有一段等待的时间.</p>
<p>在ubuntu下面这个是可以调的, 在设置&gt;辅助功能&gt;重复键里面把延迟调低一点就好了, 速度就是这个出重复字母的速度, 太快了hold不住, 调到合适位置就好.</p>
<p><strong>特别注意, 调之前最好记一下原来的位置, ubuntu的gnome桌面好像并没有恢复默认设置的按钮, 如果调乱了就很糟糕, 因为我强迫症必须调到原来的地方.</strong></p>
<h2 id="给ubuntu使用一个更好的终端"><a class="markdownIt-Anchor" href="#给ubuntu使用一个更好的终端"></a> 给ubuntu使用一个更好的终端</h2>
<p><strong>注: 后来已经转向使用wezterm, 这个终端自定义程度更加高, 而且更加现代化.</strong></p>
<p>使用过manjaro的同学都知道(假如你是安装的kde版本), 安装完了之后默认的终端模拟器很漂亮, 然后里面的shell提供一些很好的功能包括命令预测, git仓库状态显示之类的好用的功能. 那么在ubuntu上面其实也很好搞.</p>
<p>首先就是换一个终端模拟器, ubuntu默认的终端模拟器实在是不行. 注意, 那些只能的git功能包括命令预测是<strong>不需要终端模拟器的支持</strong>, 也就是假如ubuntu默认的终端你已经觉得足够好看就没必要再下新的. 但是实际情况是默认的终端没法方便地调字体, 假如最后装好的shell花里胡哨地显示了几个图案不是纯文字, 那么就会乱码. 所以建议还是换一个. 我这里使用的是terminator, 你也可以使用别的, 可以在网上搜哪个好看.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install terminator</span><br></pre></td></tr></table></figure>
<p>这是一个我认为的比较好的终端模拟器, 解决完这个问题就来解决shell的配置问题.</p>
<p>我这里还是选用的zsh, 毕竟比较成熟而且更主要的是基本上兼容bash的用法. 我最近也看见好多人选用fish之类的新shell, 但是我并不觉得有多好用, 而且因为有些写法和bash有差异, 设置为系统默认终端之后出问题的概率会增加.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install zsh</span><br><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure>
<p>第一行是安装zsh本身, 如果仅仅是zsh也不是很好用.(没有高亮没有补全什么都没有)</p>
<p>第二行是安装zsh的一个插件管理框架oh my zsh. 这个命令有可能回过时, 建议还是去官网上面找:<a target="_blank" rel="noopener" href="https://ohmyz.sh/#install">点击此</a></p>
<p>期间说要不要改成默认终端, 建议还是需要.</p>
<p>安装完了之后发现还是没有补全功能, 那是插件没有安装到位. 我这里推荐两个插件, 一个是自动检测当前输入的命令是否合法的插件, 如果命令不对整个命令会变成红色.</p>
<p>关于插件的安装参看此:<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/346665734">ubuntu终端配置</a> <strong>考虑到文章的时效性, 在跟着做的时候最好清楚自己在做什么, 安装插件的时候如果有条件和精力可以直接去GitHub上面看这个怎么用而不是跟着文章, 包括oh-my-zsh的安装命令, 自己看自己现在的情况是最好的</strong>. 我把我需要的两个插件的命令粘贴下来(原文章的第二个命令有一些小问题). 对于这篇文章的其他部分我觉得还行, 就是设置默认终端那里命令搞麻烦了, 直接使用<code>sudo update-alternatives --config x-terminal-emulator</code>也还是很不错的, 主要是这样更加直观而且知道自己做了什么, 很清楚地能够看到现在默认终端以及各个终端模拟器所处于的模式. 我这里就把它选择成我刚刚安装好的新的终端模拟器.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-syntax-highlighting</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions <span class="variable">$ZSH_CUSTOM</span>/plugins/zsh-autosuggestions</span><br></pre></td></tr></table></figure>
<p>上面两个分别是自动补全命令插件和命令高亮插件. 其他的我不需要, 所以我的~/.zshrc相比上面的文章中会简单一些.</p>
<p>还是把zsh的配置搬上来作一个备份, 虽然说也没有配置什么. <strong>千万不要直接粘贴, 复制上来只是一个备份和参考.</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># If you come from bash you might have to change your $PATH.</span></span><br><span class="line"><span class="comment"># export PATH=$HOME/bin:/usr/local/bin:$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Path to your oh-my-zsh installation.</span></span><br><span class="line"><span class="built_in">export</span> ZSH=<span class="string">&quot;<span class="variable">$HOME</span>/.oh-my-zsh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set name of the theme to load --- if set to &quot;random&quot;, it will</span></span><br><span class="line"><span class="comment"># load a random theme each time oh-my-zsh is loaded, in which case,</span></span><br><span class="line"><span class="comment"># to know which specific one was loaded, run: echo $RANDOM_THEME</span></span><br><span class="line"><span class="comment"># See https://github.com/ohmyzsh/ohmyzsh/wiki/Themes</span></span><br><span class="line">ZSH_THEME=<span class="string">&quot;robbyrussell&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set list of themes to pick from when loading at random</span></span><br><span class="line"><span class="comment"># Setting this variable when ZSH_THEME=random will cause zsh to load</span></span><br><span class="line"><span class="comment"># a theme from this variable instead of looking in $ZSH/themes/</span></span><br><span class="line"><span class="comment"># If set to an empty array, this variable will have no effect.</span></span><br><span class="line"><span class="comment"># ZSH_THEME_RANDOM_CANDIDATES=( &quot;robbyrussell&quot; &quot;agnoster&quot; )</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line to use case-sensitive completion.</span></span><br><span class="line"><span class="comment"># CASE_SENSITIVE=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line to use hyphen-insensitive completion.</span></span><br><span class="line"><span class="comment"># Case-sensitive completion must be off. _ and - will be interchangeable.</span></span><br><span class="line"><span class="comment"># HYPHEN_INSENSITIVE=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment one of the following lines to change the auto-update behavior</span></span><br><span class="line"><span class="comment"># zstyle &#x27;:omz:update&#x27; mode disabled  # disable automatic updates</span></span><br><span class="line"><span class="comment"># zstyle &#x27;:omz:update&#x27; mode auto      # update automatically without asking</span></span><br><span class="line"><span class="comment"># zstyle &#x27;:omz:update&#x27; mode reminder  # just remind me to update when it&#x27;s time</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line to change how often to auto-update (in days).</span></span><br><span class="line"><span class="comment"># zstyle &#x27;:omz:update&#x27; frequency 13</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line if pasting URLs and other text is messed up.</span></span><br><span class="line"><span class="comment"># DISABLE_MAGIC_FUNCTIONS=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line to disable colors in ls.</span></span><br><span class="line"><span class="comment"># DISABLE_LS_COLORS=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line to disable auto-setting terminal title.</span></span><br><span class="line"><span class="comment"># DISABLE_AUTO_TITLE=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line to enable command auto-correction.</span></span><br><span class="line"><span class="comment"># ENABLE_CORRECTION=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line to display red dots whilst waiting for completion.</span></span><br><span class="line"><span class="comment"># You can also set it to another string to have that shown instead of the default red dots.</span></span><br><span class="line"><span class="comment"># e.g. COMPLETION_WAITING_DOTS=&quot;%F&#123;yellow&#125;waiting...%f&quot;</span></span><br><span class="line"><span class="comment"># Caution: this setting can cause issues with multiline prompts in zsh &lt; 5.7.1 (see #5765)</span></span><br><span class="line"><span class="comment"># COMPLETION_WAITING_DOTS=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line if you want to disable marking untracked files</span></span><br><span class="line"><span class="comment"># under VCS as dirty. This makes repository status check for large repositories</span></span><br><span class="line"><span class="comment"># much, much faster.</span></span><br><span class="line"><span class="comment"># DISABLE_UNTRACKED_FILES_DIRTY=&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following line if you want to change the command execution time</span></span><br><span class="line"><span class="comment"># stamp shown in the history command output.</span></span><br><span class="line"><span class="comment"># You can set one of the optional three formats:</span></span><br><span class="line"><span class="comment"># &quot;mm/dd/yyyy&quot;|&quot;dd.mm.yyyy&quot;|&quot;yyyy-mm-dd&quot;</span></span><br><span class="line"><span class="comment"># or set a custom format using the strftime function format specifications,</span></span><br><span class="line"><span class="comment"># see &#x27;man strftime&#x27; for details.</span></span><br><span class="line"><span class="comment"># HIST_STAMPS=&quot;mm/dd/yyyy&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Would you like to use another custom folder than $ZSH/custom?</span></span><br><span class="line"><span class="comment"># ZSH_CUSTOM=/path/to/new-custom-folder</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Which plugins would you like to load?</span></span><br><span class="line"><span class="comment"># Standard plugins can be found in $ZSH/plugins/</span></span><br><span class="line"><span class="comment"># Custom plugins may be added to $ZSH_CUSTOM/plugins/</span></span><br><span class="line"><span class="comment"># Example format: plugins=(rails git textmate ruby lighthouse)</span></span><br><span class="line"><span class="comment"># Add wisely, as too many plugins slow down shell startup.</span></span><br><span class="line">plugins=(</span><br><span class="line">    git</span><br><span class="line">    extract</span><br><span class="line">    zsh-autosuggestions</span><br><span class="line">    zsh-syntax-highlighting</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> <span class="variable">$ZSH</span>/oh-my-zsh.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># User configuration</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># export MANPATH=&quot;/usr/local/man:$MANPATH&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># You may need to manually set your language environment</span></span><br><span class="line"><span class="comment"># export LANG=en_US.UTF-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Preferred editor for local and remote sessions</span></span><br><span class="line"><span class="comment"># if [[ -n $SSH_CONNECTION ]]; then</span></span><br><span class="line"><span class="comment">#   export EDITOR=&#x27;vim&#x27;</span></span><br><span class="line"><span class="comment"># else</span></span><br><span class="line"><span class="comment">#   export EDITOR=&#x27;mvim&#x27;</span></span><br><span class="line"><span class="comment"># fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Compilation flags</span></span><br><span class="line"><span class="comment"># export ARCHFLAGS=&quot;-arch x86_64&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set personal aliases, overriding those provided by oh-my-zsh libs,</span></span><br><span class="line"><span class="comment"># plugins, and themes. Aliases can be placed here, though oh-my-zsh</span></span><br><span class="line"><span class="comment"># users are encouraged to define aliases within the ZSH_CUSTOM folder.</span></span><br><span class="line"><span class="comment"># For a full list of active aliases, run `alias`.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Example aliases</span></span><br><span class="line"><span class="comment"># alias zshconfig=&quot;mate ~/.zshrc&quot;</span></span><br><span class="line"><span class="comment"># alias ohmyzsh=&quot;mate ~/.oh-my-zsh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">setopt</span> no_nomatch <span class="comment"># zsh里面无法使用bash的通配符* 这一行解决这个问题</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> LANG=en_US.UTF-8</span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">ls</span>=<span class="string">&#x27;lsd&#x27;</span> <span class="comment"># 自带的ls命令不好看 我使用lsd替代ls alias作用自搜</span></span><br><span class="line"><span class="built_in">alias</span> neofetch=<span class="string">&#x27;neofetch --disable cols&#x27;</span> <span class="comment"># neofetch有bug</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/home/liu/code/software_bin/bin <span class="comment"># 添加环境变量的形式</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/home/liu/.local/bin</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/home/liu/.local/share/nvim/mason/bin</span><br><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/.nvm&quot;</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; \. <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span>  <span class="comment"># This loads nvm</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/bash_completion&quot;</span> ] &amp;&amp; \. <span class="string">&quot;<span class="variable">$NVM_DIR</span>/bash_completion&quot;</span>  <span class="comment"># This loads nvm bash_completion</span></span><br></pre></td></tr></table></figure>
<p>注意看我这里开启的插件和我下载的插件要对应.</p>
<p><strong>有一点需要注意, 在改变默认终端之后也就是运行了chsh这个命令之后, 最好还是重新启动一下系统.</strong></p>
<p>因为随着终端的改变, 很多默认的行为会改变. 比如说下文即将有的nvm, 因为是安装在家目录底下, 需要添加环境变量才能够正确地运行程序. 如果先完成zsh的改变之后重启, 此时默认终端就已经完全改变为zsh, 这样安装nvm的时候它会自动帮我们添加环境变量到<code>~/.zshrc</code>里面. (虽然这个问题也不是严重, 也很好解决, 我们自己动一下也行了, 重装一下也行了, 但是按照顺序, 一步一步来, 多重启可以解决很多麻烦)</p>
<h2 id="nodejs-和-npm使用nvm安装"><a class="markdownIt-Anchor" href="#nodejs-和-npm使用nvm安装"></a> nodejs 和 npm(使用nvm安装)</h2>
<p>因为本人很喜欢lunarvim这个配置(<strong>好, 现在我已经润helix了, 任何vim终将绳之以法!</strong>), 而且包括这hexo博客也需要nodejs和npm. 但是问题在于Ubuntu自带的包管理器里面的nodejs和npm版本比较低, 因为我是22.04养老(现在是22.10了), checkhealth的时候还经常说版本不符合要求.</p>
<p>使用nvm来管理nodejs和npm, 不仅可以在Ubuntu上面获得最新的版本, 还可以解决<code>npm install -g &lt;package_name&gt;</code>root权限的问题. 其实很多人在npm全局安装包的时候解决方式比较简单粗暴, 都是直接root权限解决. 之所以需要root权限, 是因为默认情况下的npm全局安装是把这个package安装到根目录下面的位置. 但是实际上这样非常不好:</p>
<p><a target="_blank" rel="noopener" href="https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally">解决npm -g install的权限问题</a></p>
<p>在官方文档里面是十分不推荐使用sudo权限粗暴地解决问题的.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/nvm-sh/nvm">nvm的GitHub</a></p>
<p>nvm的思想很像这个conda. 安装的所有的包都会在<code>~/.nvm</code>下面. 全局安装也不需要root权限了(因为此时全局安装需要修改的目录也不再是root目录下面的某个位置)</p>
<h2 id="tldr-too-long-dont-read"><a class="markdownIt-Anchor" href="#tldr-too-long-dont-read"></a> tldr: too long don’t read</h2>
<p>虽然说manual手册和<code>--help</code>是很多人喜欢看的文档<s>喜欢个鬼, 谁喜欢看manual手册啊</s>, 但是有没有更好的办法用一种更加简洁的方式来知道一个命令的使用方法呢?</p>
<p>就拿tar来举例子, 我只是想要知道怎么解压tar.gz, 我只是一时不小心忘记了, 再去翻全英文的man手册是否有点失礼了呢?</p>
<p><a target="_blank" rel="noopener" href="https://github.com/tldr-pages/tldr">tldr的github</a></p>
<p>tldr是一个以很简洁的形式展现命令的工具, 比如说对于tar, 我运行tldr的结果是这样:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">归档实用程序。</span><br><span class="line">  通常与压缩方法结合使用，例如 gzip 或 bzip2.</span><br><span class="line">  更多信息：&lt;https://www.gnu.org/software/tar&gt;.</span><br><span class="line"></span><br><span class="line">  创建存档并将其写入文件：</span><br><span class="line"></span><br><span class="line">      tar cf target.tar file1 file2 file3</span><br><span class="line"></span><br><span class="line">  创建一个 gzip 压缩文件并将其写入文件：</span><br><span class="line"></span><br><span class="line">      tar czf target.tar.gz file1 file2 file3</span><br><span class="line"></span><br><span class="line">  使用相对路径从目录创建一个 gzip 压缩文件：</span><br><span class="line"></span><br><span class="line">      tar czf target.tar.gz --directory=path/to/directory .</span><br><span class="line"></span><br><span class="line">  详细地将（压缩的）存档文件提取到当前目录中：</span><br><span class="line"></span><br><span class="line">      tar xvf source.tar[.gz|.bz2|.xz]</span><br><span class="line"></span><br><span class="line">  将（压缩的）存档文件解压缩到目标目录中：</span><br><span class="line"></span><br><span class="line">      tar xf source.tar[.gz|.bz2|.xz] --directory=directory</span><br><span class="line"></span><br><span class="line">  创建压缩存档并将其写入文件，使用存档后缀确定压缩程序：</span><br><span class="line"></span><br><span class="line">      tar caf target.tar.xz file1 file2 file3</span><br><span class="line"></span><br><span class="line">  详细列出 tar 文件的内容：</span><br><span class="line"></span><br><span class="line">      tar tvf source.tar</span><br><span class="line"></span><br><span class="line">  从存档文件中提取与模式匹配的文件：</span><br><span class="line"></span><br><span class="line">      tar xf source.tar --wildcards <span class="string">&quot;*.html&quot;</span></span><br></pre></td></tr></table></figure>
<p>非常的诱人了. (在博客里面看还是不一样, 博客里面代码块高亮差, 自己用的时候是彩色的很舒服)</p>
<p><strong>但是新版本tldr更新之后, 每次查命令的时候, 都需要和服务器同步</strong>.(虽然说明明可以通过cache的形式本地查找, 不知道为啥即使<code>tldr --update</code>了之后还是没法查看)</p>
<p>推荐另一个用rust完成的tldr项目: <a target="_blank" rel="noopener" href="https://github.com/dbrgn/tealdeer">dbrgn/tealdeer</a></p>
<p><strong>这个版本的tldr是可以离线使用的</strong>, 一次更新基本上就可以使用了. 只需要一次更新魔法上网即可. (对于我Ubuntu来讲, 我只直接下载了二进制版本, 然后把下载好的可执行文件重命名为tldr, 然后加到环境变量里面, 当做tldr使用即可.)</p>
<h2 id="可能改善笔记本电脑的续航问题"><a class="markdownIt-Anchor" href="#可能改善笔记本电脑的续航问题"></a> 可能改善笔记本电脑的续航问题</h2>
<p>推荐一个叫做tlp的软件, 先安装, 然后<code>sudo tlp start</code>, 之后可能会没法启动, <strong>根据屏幕上的提示来输入接下来的命令</strong>. 我也不知道是不是能够改善续航问题. 输入<code>sudo tlp-stat</code>可以看现在tlp是不是在运行以及状态. 据说启动之后就不用管了, 后台会自动省电, 听着真玄乎.</p>
<h2 id="nala-一个稍微美丽的apt前端"><a class="markdownIt-Anchor" href="#nala-一个稍微美丽的apt前端"></a> nala: 一个稍微美丽的apt前端</h2>
<p>我必须说明, 其实这种所谓美化并不符合linux的哲学. 如非必要其实没有必要依赖很多外来的, 给系统复杂性增加了. 折腾终端模拟器搭配zsh已经很复杂了. 如果输出不美观其实也可以使用grep之类的工具, 也是非常不错.</p>
<p><a target="_blank" rel="noopener" href="https://gitlab.com/volian/nala">gitlab: nala</a></p>
<p>还有一个参考资料是一个B站Up的视频, <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1mT41127fa?share_source=copy_web">点此跳转</a></p>
<p>apt比较不美观, 输出信息比较多, 占用很多屏幕信息. 而且新安装和卸载的软件包不能够明确地用颜色标出来. 当然不美观不是nala好用的主要理由, 最重要的理由是它可以保存nala安装包包括upgrade更新的信息, 从而实现回滚(虽然你timeshift回滚也很好用但是…). 颜色的加入确实让易用性要强一些.</p>
<p>但是美中不足的是, 这里的许多消息都被限制在框里面, 滚动了之后就走了, 让人看不到完整的信息.(不过那些信息也许没那么重要, 假如有error或者是其他信息说不定会着重显示呢.)</p>
<h2 id="clang编译找不到头文件"><a class="markdownIt-Anchor" href="#clang编译找不到头文件"></a> clang编译找不到头文件</h2>
<p>我建议别碰Clang, 我之前碰clang是因为我想使用clangd补全, 我以为必须要clang, 谁知道这两个根本一点关系都没有.</p>
<p>这个问题也是一个经常见的问题: <a target="_blank" rel="noopener" href="https://askubuntu.com/questions/1441844/todays-ubuntu-22-04-updates-seem-to-break-clang-compiler/1441954#1441954">askubuntu</a></p>
<p>这个问题居然是新出现的, 我最开始不知道为啥没有这个问题. 原因在于clang自己并不带有头文件, 需要使用c++的标准库, 或者说得更清楚一些需要libstdc++这个东西.</p>
<p>但是很多时候会出现问题. 比如<code>gcc-12</code>这个包已经出来, 而且很有可能已经安装到你电脑上. 但是和<code>gcc-12</code>相对应 的</p>
<p>我在安装g++的时候连带着安装了<code>libstdc++-11-dev</code>, 但是clang仍然找不到头文件, 最后加装了<code>libstdc++-12-dev</code>才解决问题. 本质上这是ubuntu可以安装多个版本导致的(这本来是一个优点结果却成了缺点).</p>
<p>所以第一个解决方法就是, 只留一个. 也就是卸载<code>cpp-12</code>这个包. 连带的<code>libstdc++-12-dev</code>也跟着卸载(免得占空间). 标准为g++还有gcc的可执行文件只留下一个(去<code>/usr/bin</code>下面找). 然后<code>clang -v</code>输出:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  bin clang -v   </span><br><span class="line">Ubuntu clang version 14.0.0-1ubuntu1</span><br><span class="line">Target: x86_64-pc-linux-gnu</span><br><span class="line">Thread model: posix</span><br><span class="line">InstalledDir: /usr/bin</span><br><span class="line">Found candidate GCC installation: /usr/bin/../lib/gcc/x86_64-linux-gnu/11</span><br><span class="line">Selected GCC installation: /usr/bin/../lib/gcc/x86_64-linux-gnu/11</span><br><span class="line">Candidate multilib: .;@m64</span><br><span class="line">Selected multilib: .;@m64</span><br></pre></td></tr></table></figure>
<p>这里的<code>Selected GCC installation</code>只有一行, 没有出现多意义的情况, 此时clang可以正常使用, 默认使用libstdc++, 而且是现在唯一的libstdc++, 也是现在gcc的libstdc++.</p>
<p>当然你也可以补全, 假如说<code>clang -v</code>出现了多意义的情况, 你只需要找到<code>clang -v</code>里面显示的最新的gcc的版本是什么, 然后安装对应版本的<code>libstdc++-xx-dev</code>即可. 但是这样有点浪费空间, 而且奇怪的是<code>gcc-12</code>已经可以用但是ubuntu官方安装<code>apt install gcc</code>的时候仍然默认安装版本11.3, 这说明官方推荐.(虽然说你也可以把这个gcc的链接改一下)</p>
<p><strong>第二个选择就是使用libc++.</strong> 其实在更多人的认识里面clang应该和libc++联系更加紧密. 但是在Linux上面clang的默认编译参数是使用libstdc++的, 比较奇怪. 同时也引出了上面这样的问题, 导致经常clang就用不了.</p>
<p><code>sudo apt install libc++-dev</code></p>
<p><code>sudo apt install libc++abi-dev</code></p>
<p>当然你在输命令的时候可能会发现有好多版本, 这种情况如果有特殊版本需求就两个都装匹配版本即可, 如果不知道哪个版本就像上面这样输入, 最后官方会有一个默认的版本安装.</p>
<p>只不过这个时候每次clang编译都需要加上<code>-stdlib=libc++</code>才行了, 因为这个时候我们相当于是放弃了libstdc++而使用libc++, 所以这样.</p>
<p>可见多版本既是好处, 也要多加注意, 不然也是坏处.</p>
<h1 id="后记"><a class="markdownIt-Anchor" href="#后记"></a> 后记</h1>
<p>未完, 有时间接着写.</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/study/" rel="tag"># study</a>
              <a href="/tags/linux/" rel="tag"># linux</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/11/10/%E8%AE%BA%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%E7%9A%84%E6%96%B9%E6%B3%95%E8%AE%BA/" rel="prev" title="论解决问题的方法论">
                  <i class="fa fa-angle-left"></i> 论解决问题的方法论
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/11/10/clangd-codelldb%E7%9A%84vscode%E8%A1%A8%E7%8E%B0/" rel="next" title="clangd+codelldb的vscode表现">
                  clangd+codelldb的vscode表现 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">wonderlandKid</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" integrity="sha256-3574TpfThVfeAhg+I4+N39EJiLN3QUkuEsMVe8hWAR4=" crossorigin="anonymous">



</body>
</html>
