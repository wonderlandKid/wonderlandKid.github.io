<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://pic.imgdb.cn/item/66ab69ecd9c307b7e945ca17.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://pic.imgdb.cn/item/66ab69ecd9c307b7e945ca17.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"wonderlandkid.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.18.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="å­¦ä¹ STLæ˜¯ä¸€ä¸ªå’Œè‰°éš¾çš„è¿‡ç¨‹, ä½†æ˜¯é‡Œé¢çš„å¾ˆå¤šå®¹å™¨å´åªéœ€è¦ç•¥å¾®äº†è§£å°±èƒ½å¤Ÿä½¿ç”¨. è¿™ç¯‡æ–‡ç« å°±æ¥è®°å½•ä¸€ä¸‹å¸¸è§çš„å®¹å™¨åŠå…¶ä½¿ç”¨.">
<meta property="og:type" content="article">
<meta property="og:title" content="CPPä¸­çš„container">
<meta property="og:url" content="http://wonderlandkid.github.io/2023/10/09/CPP%E4%B8%AD%E7%9A%84container/index.html">
<meta property="og:site_name" content="wonderlandKidçš„å°çª">
<meta property="og:description" content="å­¦ä¹ STLæ˜¯ä¸€ä¸ªå’Œè‰°éš¾çš„è¿‡ç¨‹, ä½†æ˜¯é‡Œé¢çš„å¾ˆå¤šå®¹å™¨å´åªéœ€è¦ç•¥å¾®äº†è§£å°±èƒ½å¤Ÿä½¿ç”¨. è¿™ç¯‡æ–‡ç« å°±æ¥è®°å½•ä¸€ä¸‹å¸¸è§çš„å®¹å™¨åŠå…¶ä½¿ç”¨.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://upload.cppreference.com/mwiki/images/1/1b/range-begin-end.svg">
<meta property="og:image" content="https://upload.cppreference.com/mwiki/images/3/39/range-rbegin-rend.svg">
<meta property="og:image" content="https://pic.imgdb.cn/item/65274551c458853aefaf3969.png">
<meta property="article:published_time" content="2023-10-09T11:42:13.000Z">
<meta property="article:modified_time" content="2025-02-27T08:36:46.012Z">
<meta property="article:author" content="wonderlandKid">
<meta property="article:tag" content="study">
<meta property="article:tag" content="cpp">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://upload.cppreference.com/mwiki/images/1/1b/range-begin-end.svg">


<link rel="canonical" href="http://wonderlandkid.github.io/2023/10/09/CPP%E4%B8%AD%E7%9A%84container/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://wonderlandkid.github.io/2023/10/09/CPP%E4%B8%AD%E7%9A%84container/","path":"2023/10/09/CPPä¸­çš„container/","title":"CPPä¸­çš„container"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>CPPä¸­çš„container | wonderlandKidçš„å°çª</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">wonderlandKidçš„å°çª</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2"><span class="nav-text"> å†™åœ¨å‰é¢</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sequence-containers"><span class="nav-text"> Sequence containers</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#arrayc11"><span class="nav-text"> array(C++11)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vector"><span class="nav-text"> vector</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#capacity-size-shrink_to_fit%E5%92%8Creserve"><span class="nav-text"> capacity(), size(), shrink_to_fit()å’Œreserve()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#constructor"><span class="nav-text"> constructor</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#access"><span class="nav-text"> access</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iterators"><span class="nav-text"> iterators</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#modifiers"><span class="nav-text"> modifiers</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#deque"><span class="nav-text"> deque</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#forward_listc11"><span class="nav-text"> forward_list(c++11)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#list"><span class="nav-text"> list</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#remove%E5%92%8Cremove_if"><span class="nav-text"> remove()å’Œremove_if()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#associative-containers"><span class="nav-text"> Associative containers</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#set"><span class="nav-text"> set</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="wonderlandKid"
      src="https://pic.imgdb.cn/item/66ab69ecd9c307b7e945ca17.png">
  <p class="site-author-name" itemprop="name">wonderlandKid</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">24</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://wonderlandkid.github.io/2023/10/09/CPP%E4%B8%AD%E7%9A%84container/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://pic.imgdb.cn/item/66ab69ecd9c307b7e945ca17.png">
      <meta itemprop="name" content="wonderlandKid">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wonderlandKidçš„å°çª">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="CPPä¸­çš„container | wonderlandKidçš„å°çª">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          CPPä¸­çš„container
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2023-10-09 19:42:13" itemprop="dateCreated datePublished" datetime="2023-10-09T19:42:13+08:00">2023-10-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-02-27 16:36:46" itemprop="dateModified" datetime="2025-02-27T16:36:46+08:00">2025-02-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>å­¦ä¹ STLæ˜¯ä¸€ä¸ªå’Œè‰°éš¾çš„è¿‡ç¨‹, ä½†æ˜¯é‡Œé¢çš„å¾ˆå¤šå®¹å™¨å´åªéœ€è¦ç•¥å¾®äº†è§£å°±èƒ½å¤Ÿä½¿ç”¨. è¿™ç¯‡æ–‡ç« å°±æ¥è®°å½•ä¸€ä¸‹å¸¸è§çš„å®¹å™¨åŠå…¶ä½¿ç”¨. <span id="more"></span></p>
<h1 id="å†™åœ¨å‰é¢"><a class="markdownIt-Anchor" href="#å†™åœ¨å‰é¢"></a> å†™åœ¨å‰é¢</h1>
<p>å‚è€ƒæ–‡ç« æˆ–è€…æ˜¯æ¨èé˜…è¯»: <a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/container">cppä¸­çš„container</a></p>
<p>åœ¨C++11ä¹‹å‰, C++ä¸­æœ‰æ‰€è°“çš„<code>sequence containers</code>å’Œ<code>associative containers</code>. sequence, å°±åƒå®ƒçš„è‹±æ–‡åŸæ„ä¸€æ ·, æ˜¯è¡¨ç¤ºä¸€ç³»åˆ—æ•°æ®. æ¯”å¦‚æ•°ç»„å…¶å®å°±æ˜¯ä¸€ç³»åˆ—æ•°æ®. ä¸‹é¢æˆ‘ä»¬å…ˆæ¥çœ‹sequence containerä¸­çš„array, vector, deque, forward_listä»¥åŠlist.</p>
<p>æœ¬ç¯‡æºä»£ç æ‘˜è‡ªllvmé¡¹ç›®çš„libcxx, libstdc++å®åœ¨æ˜¯å¤ªéš¾çœ‹äº†.</p>
<h1 id="sequence-containers"><a class="markdownIt-Anchor" href="#sequence-containers"></a> Sequence containers</h1>
<h2 id="arrayc11"><a class="markdownIt-Anchor" href="#arrayc11"></a> array(C++11)</h2>
<p>arrayæ˜¯C++11æ‰åŠ å…¥çš„æ–°å®¹å™¨, arrayå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæ•°ç»„, è¿™ä¸ªæ•°ç»„å°±æ˜¯Cè¯­è¨€é‡Œé¢çš„æ•°ç»„, ç±»ä¼¼äº<code>int a[3]</code>è¿™æ ·çš„. ä¸åŒç‚¹åœ¨äºarrayå¯¹äºæ•°æ®çš„æ‰€æœ‰æ›´åŠ æ˜ç¡®.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a[<span class="number">3</span>];</span><br><span class="line">array&lt;<span class="type">int</span>,3&gt; a;</span><br></pre></td></tr></table></figure>
<p>åŸæ¥Cé£æ ¼çš„æ•°ç»„ä¸€ç›´å’ŒæŒ‡é’ˆæ··æ·†, Cé£æ ¼çš„æ•°ç»„åœ¨è®¾è®¡ä¼ å‚, æ‹·è´ç­‰å¤šç§æ“ä½œçš„æ—¶å€™å°±å¾ˆéš¾è¯´æ¸…æ¥š. ç°åœ¨aå°±æ˜¯ä¸€ä¸ªæ•´ä½“, ç±»å‹å°±æ˜¯array&lt;int,3&gt;, æ›´åŠ ç°ä»£.</p>
<p>å½“ç„¶è¿˜æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„åŠŸèƒ½å°±æ˜¯æä¾›äº†è¿­ä»£å™¨. åœ¨C++çš„algorithmå¤´æ–‡ä»¶é‡Œé¢æä¾›çš„å¾ˆå¤šç®—æ³•éƒ½æ˜¯éœ€è¦æ¥å—è¿­ä»£å™¨, ä½†æ˜¯å¦‚æœä½¿ç”¨ä¼ ç»Ÿæ•°ç»„å°±æ²¡æ³•ä½¿ç”¨, æ¯”å¦‚å¸¸è§çš„sort, for_eachç­‰ç­‰. è€Œarrayå®ç°äº†ç±»ä¼¼äºvectorçš„begin(), end()ç­‰. å½“ç„¶å› ä¸ºæ”¯æŒè¿­ä»£å™¨å½“ç„¶ä¹Ÿæ”¯æŒranged based for loopçš„éå†.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span>&amp;i: a)&#123;</span><br><span class="line">	cout&lt;&lt;a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºåªæ˜¯ä¸€ä¸ªæ™®é€šçš„æ•°ç»„æ²¡ä»€ä¹ˆå¥½è¯´çš„, é‡Œé¢æœ‰ä¸€ä¸ªæ¯”è¾ƒå…³é”®å°±æ˜¯åœ¨è®¿é—®çš„æ—¶å€™å¯ä»¥ä½¿ç”¨at()æˆ–è€…æ˜¯operator[], å½“ç„¶è¿™ä¸€ç‚¹åœ¨åé¢å…¶ä»–sequence containerçš„æ—¶å€™ä¹Ÿæ˜¯åŒæ ·çš„. é‚£è¿™æ ·è®¿é—®æœ‰ä»€ä¹ˆå¥½å¤„å‘¢? å¥½å¤„å°±æ˜¯å¯ä»¥æŠ›å‡ºå¼‚å¸¸:</p>
<blockquote>
<p>Returns a reference to the element at specified location pos, with bounds checking.</p>
<p>If pos is not within the range of the container, an exception of type std::out_of_range is thrown.</p>
</blockquote>
<p>è¿™ä¹Ÿæ˜¯ä¸ºäº†è®©C++æ›´åŠ ç°ä»£ç»Ÿä¸€, è¶Šç•Œçš„æ—¶å€™æŠ›å‡ºå¼‚å¸¸ä¹Ÿèƒ½å¤Ÿç»™ç¼–ç¨‹äººå‘˜ä¸€äº›å¤„ç†çš„ç©ºé—´.</p>
<h2 id="vector"><a class="markdownIt-Anchor" href="#vector"></a> vector</h2>
<p>å¤šçœ‹<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/container/vector">cpprefer</a></p>
<p>è¿™ä½æ›´æ˜¯éå¸¸çš„å¸¸ç”¨, vectorä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„åŠ¨æ€æ•°ç»„, æˆ‘ä»¬å¯ä»¥ä¸æ–­åœ°å‘ä¸€æ®µè¿ç»­çš„ç©ºé—´åŠ å…¥æ•°æ®. ä¼ ç»Ÿæ•°ç»„åœ¨å­˜å…¥æ•°æ®ä¹‹åå°±æ²¡æœ‰åŠæ³•æ‰©å¤§äº†, ä½†æ˜¯vectorå¯ä»¥, å¯ä»¥é€šè¿‡å°¾éƒ¨æ’å…¥çš„æ–¹æ³•æ¥å‘å…¶ä¸­å¢åŠ æ•°æ®.(å½“ç„¶ä¹Ÿæœ‰insert()å®é™…ä¸Šæ’å…¥ä»»ä½•åœ°æ–¹)</p>
<p>åœ¨æ—¶é—´å¤æ‚åº¦æ–¹é¢:</p>
<blockquote>
<p>The complexity (efficiency) of common operations on vectors is as follows:</p>
<ul>
<li>Random access - constantÂ ğ“(1).</li>
<li>Insertion or removal of elements at the end - amortized constantÂ ğ“(1).</li>
<li>Insertion or removal of elements - linear in the distance to the end of the vectorÂ ğ“(n).</li>
</ul>
</blockquote>
<p>å¯ä»¥çœ‹è§ä»å°¾éƒ¨æ’å…¥æˆ–è€…æ˜¯åˆ é™¤å…ƒç´ æ˜¯å¾ˆè½»æ¾, æ—¶é—´å¤æ‚åº¦æ˜¯1, è€Œå…¶ä»–åœ°æ–¹çš„insertå’Œremove, åˆ™æ­£æ¯”äºå’Œå°¾éƒ¨çš„è·ç¦».</p>
<p>ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹cppreferenceå¦‚ä½•æè¿°å®ƒçš„å¸¸è§ä¸€äº›æˆå‘˜å‡½æ•°:</p>
<h3 id="capacity-size-shrink_to_fitå’Œreserve"><a class="markdownIt-Anchor" href="#capacity-size-shrink_to_fitå’Œreserve"></a> capacity(), size(), shrink_to_fit()å’Œreserve()</h3>
<p>æˆ‘æƒ³æŠŠè¿™ä¸¤ä¸ªæ”¾åœ¨æœ€å‰é¢æ¥è®². vectoræ—¢ç„¶è¢«ç§°ä¸ºåŠ¨æ€æ•°ç»„, é‚£é¦–å…ˆæ˜¯æ•°ç»„. ä¹Ÿå°±æ˜¯ç©ºé—´æ˜¯è¿ç»­çš„, ä¸æ˜¯ä¸æ˜¯åœ¨æ ˆä¸Šè¿ç»­è€Œæ˜¯å †ä¸Šä¸€ç‰‡è¿ç»­çš„ç©ºé—´. é‚£æ—¢ç„¶æ˜¯è¿ç»­çš„ç©ºé—´æ˜¯æ€ä¹ˆåšåˆ°åŠ¨æ€çš„å‘¢? åŸå› å°±æ˜¯capacity, æ–°å»ºä¸€ä¸ªvectorçš„æ—¶å€™éƒ½ä¼šæœ‰ä¸€ä¸ªcapacity, å³ä½¿é‡Œé¢æ²¡æœ‰ä»»ä½•å…ƒç´ . çœ‹ä¸‹é¢ä»£ç (ä»£ç æµ‹è¯•ç¯å¢ƒæ˜¯C++20 O2ä¼˜åŒ–):</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; test1&#123;&#125;;</span><br><span class="line">    cout &lt;&lt; test1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">    test1.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">    cout &lt;&lt; test1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">    test1.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">    cout &lt;&lt; test1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">    test1.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">    cout &lt;&lt; test1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡º:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">4</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹è§capacityéšç€ä¸æ–­åœ°æ’å…¥å…ƒç´ æ˜¯ç¿»å€çš„, è€Œä¸”capacityæŒ‡çš„æ˜¯æœ€å¤§å®¹é‡, å³ä½¿popäº†, capacityä¹Ÿä¸ä¼šå˜.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; test1&#123;&#125;;</span><br><span class="line">    cout &lt;&lt; test1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">    test1.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">    cout &lt;&lt; test1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">    test1.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">    cout &lt;&lt; test1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">    test1.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">    cout &lt;&lt; test1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    test1.<span class="built_in">pop_back</span>();</span><br><span class="line">    test1.<span class="built_in">pop_back</span>();</span><br><span class="line">    test1.<span class="built_in">pop_back</span>();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ç°åœ¨sizeå¤§å°æ˜¯%d, capacityå¤§å°æ˜¯%d\n&quot;</span>, (<span class="type">int</span>)test1.<span class="built_in">size</span>(),</span><br><span class="line">           (<span class="type">int</span>)test1.<span class="built_in">capacity</span>());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡º:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">4</span><br><span class="line">ç°åœ¨sizeå¤§å°æ˜¯0, capacityå¤§å°æ˜¯4</span><br></pre></td></tr></table></figure>
<p>sizeæ˜¯é‡Œé¢å­˜å‚¨äº†å¤šå°‘ä¸ªå…ƒç´ , capacityæ˜¯vectorå®é™…å ç”¨çš„ç©ºé—´. å½“è¶…å‡ºcapacityçš„æ—¶å€™ä¼šç¿»å€capacity, å¹¶ä¸”æ‰¾ä¸€å—æ–°çš„å†…å­˜ç©ºé—´. é‚£è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸€ä¸ªç”³è¯·å†…å­˜çš„è¿‡ç¨‹, è¿™ä¸ªæ—¶å€™çš„æ•°ç»„è¶Šå¤§è¶Šè€—æ—¶é—´.</p>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ç»å¸¸ä¼šæœ‰ä¸€äº›é”™è¯¯äº§ç”Ÿ, ä¸€ä¸ªå¸¸è§çš„é”™è¯¯å°±æ˜¯å› ä¸ºå†…å­˜ä¸­å‡ºç°æ•°æ®è½¬ç§», å¿…é¡»ä¿è¯è¿­ä»£å™¨çš„æ—¶æ•ˆæ€§. å½“ç„¶ä¹ŸåŒ…æ‹¬æŒ‡é’ˆçš„æ—¶æ•ˆæ€§.</p>
<p>ä¸‹é¢ä»£ç ç”¨åˆ°äº†data()æˆå‘˜å‡½æ•°, è¯¦ç»†å¯ä»¥çœ‹<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/container/vector/data">cpprefer</a>, æ— è®ºå¦‚ä½•å°±æ˜¯è·å¾—åº•å±‚å†…å®¹çš„æŒ‡é’ˆ:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; test1&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">    <span class="keyword">auto</span> p = test1.<span class="built_in">data</span>();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è®¿é—®æŒ‡é’ˆæŒ‡å‘çš„ç¬¬ä¸€ä¸ªå€¼%d\n&quot;</span>, *p);</span><br><span class="line">    test1.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">    test1.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">    test1.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">    test1.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">    test1.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è®¿é—®æŒ‡é’ˆæŒ‡å‘çš„ç¬¬ä¸€ä¸ªå€¼%d\n&quot;</span>, *p);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºæ˜¯:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è®¿é—®æŒ‡é’ˆæŒ‡å‘çš„ç¬¬ä¸€ä¸ªå€¼1</span><br><span class="line">è®¿é—®æŒ‡é’ˆæŒ‡å‘çš„ç¬¬ä¸€ä¸ªå€¼1488999553</span><br></pre></td></tr></table></figure>
<p>é€ æˆè¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯vectorå·²ç»è½¬ç§»èµ°äº†, ä¸åœ¨åŸä½ç½®äº†. æ˜¯ä¸€ä¸ªéšè”½çš„é”™è¯¯. è€Œä¸”æ¯”è¾ƒç¦»è°±çš„æ˜¯g++å¹¶ä¸ä¼šå¯¹æ­¤åšä»»ä½•æç¤º. ä¸è¿‡ä½¿ç”¨g++è‡ªå¸¦çš„è¶Šç•Œæ£€æŸ¥å¯ä»¥æ£€æŸ¥å‡ºæ¥, ä½†æ˜¯è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¼ºåˆ¶é€‰é¡¹:</p>
<p><code>g++ -fsanitize=address -fno-omit-frame-pointer -O2 -g mytest.cpp</code></p>
<p>é‚£ä¹ˆå†æ¥è€ƒè™‘reserve, ä¸æ˜¯reverse! reserveæ˜¯é¢„ç•™. å¦‚æœä¸€å¼€å§‹å°±çŸ¥é“capacityæ˜¯å¤§æ¦‚å¤šå°‘, ä¸å°±å¯ä»¥å‡å°‘å†…å­˜é‡åˆ†é…çš„æ¬¡æ•°å—? æˆ‘å¯ä»¥<code>vec.reserve(20)</code>ç›´æ¥æŠŠcapacityæ‹‰åˆ°20, è™½ç„¶size()è¿˜æ˜¯0.</p>
<p>shrink_to_fit()å°±æ˜¯å°†capacityç¼©å°åˆ°sizeé™„è¿‘, é‡Šæ”¾å¤šä½™çš„ç©ºé—´.</p>
<p>æ‰€ä»¥è¿™å››ä¸ªæ”¾åœ¨ä¸€èµ·è®².</p>
<h3 id="constructor"><a class="markdownIt-Anchor" href="#constructor"></a> constructor</h3>
<p>ä¸‹é¢æ¥è¯´è¯´æ„é€ å‡½æ•°çš„é—®é¢˜.</p>
<p>ä¸‹é¢åªè¯´ä¸€ä¸‹å¸¸ç”¨çš„æ„é€ å‡½æ•°. ä¸‹é¢å››ä¸ªæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‹·è´æ„é€ </span></span><br><span class="line"><span class="built_in">vector</span>( <span class="type">const</span> vector&amp; other );</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="title">vector</span><span class="params">( <span class="type">const</span> vector&amp; other )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§»åŠ¨æ„é€ </span></span><br><span class="line"><span class="built_in">vector</span>( vector&amp;&amp; other );</span><br><span class="line"><span class="built_in">vector</span>( vector&amp;&amp; other ) <span class="keyword">noexcept</span>;</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="title">vector</span><span class="params">( vector&amp;&amp; other )</span> <span class="keyword">noexcept</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç©ºæ„é€  é»˜è®¤</span></span><br><span class="line"><span class="built_in">vector</span>();</span><br><span class="line"><span class="built_in">vector</span>() <span class="built_in">noexcept</span>(<span class="built_in">noexcept</span>(<span class="built_in">Allocator</span>()));</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="title">vector</span><span class="params">()</span> <span class="title">noexcept</span><span class="params">(<span class="keyword">noexcept</span>(Allocator()))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// countä¸ªvalue</span></span><br><span class="line"><span class="function"><span class="keyword">explicit</span> <span class="title">vector</span><span class="params">( size_type count,</span></span></span><br><span class="line"><span class="params"><span class="function">                 <span class="type">const</span> T&amp; value = T(),</span></span></span><br><span class="line"><span class="params"><span class="function">                 <span class="type">const</span> Allocator&amp; alloc = Allocator() )</span></span>;</span><br><span class="line"><span class="built_in">vector</span>( size_type count,</span><br><span class="line">                 <span class="type">const</span> T&amp; value,</span><br><span class="line">                 <span class="type">const</span> Allocator&amp; alloc = <span class="built_in">Allocator</span>() );</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="title">vector</span><span class="params">( size_type count,</span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="type">const</span> T&amp; value,</span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="type">const</span> Allocator&amp; alloc = Allocator() )</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿­ä»£å™¨åˆå§‹åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt; <span class="keyword">class</span> InputIt &gt;</span></span><br><span class="line"><span class="function"><span class="title">vector</span><span class="params">( InputIt first, InputIt last,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="type">const</span> Allocator&amp; alloc = Allocator() )</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt; <span class="keyword">class</span> InputIt &gt;</span></span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="title">vector</span><span class="params">( InputIt first, InputIt last,</span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="type">const</span> Allocator&amp; alloc = Allocator() )</span></span>;</span><br></pre></td></tr></table></figure>
<p>ç©ºæ„é€ å‡½æ•°å’Œæ‹·è´ä¸å¿…å¤šè¯´, ç§»åŠ¨æ„é€ å°±æ˜¯è¦æ¥å—ä¸€ä¸ªå³å€¼, é€šè¿‡å°†å‚æ•°çš„æ‰€æœ‰æ•°æ®ç§»åŠ¨ç»™è¦æ„é€ çš„å¯¹è±¡æ¥å®Œæˆ. è¿™æ˜¯C++11ä¸€ä¸ªå¾ˆé‡è¦çš„è¯é¢˜. å¯ä»¥äº†è§£ä¸€ä¸‹C++11çš„å³å€¼å¼•ç”¨.</p>
<p>ç„¶åä¸‹ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„å°±æ˜¯ç”¨nä¸ªxæ¥åˆå§‹åŒ–.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">test1</span><span class="params">(<span class="number">100</span>, <span class="number">1</span>)</span></span>; <span class="comment">// test1 = [1,1,1,...1](100ä¸ª)</span></span><br></pre></td></tr></table></figure>
<p>å€¼å¾—ä¸€æçš„æ˜¯C++11å¼•å…¥äº†æ‰€è°“çš„List-initializationåˆå§‹åŒ–æ–¹æ³•, ç®€ç§°å¤§æ‹¬å·åˆå§‹åŒ–. å¦‚æœæƒ³è¦åˆå§‹åŒ–vectorä¸º1 2 3 4ä¹Ÿå¯ä»¥è¿™æ ·å†™:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; test1&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Šæ˜¯ç”¨äº†å¦ä¸€ä¸ªä¸æ€ä¹ˆå¸¸è§çš„vectoråˆå§‹åŒ–å‡½æ•°. ä¸€å®šä¸è¦æ··æ·†:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">test1</span><span class="params">(<span class="number">100</span>, <span class="number">1</span>)</span></span>; <span class="comment">// 100ä¸ª1</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; test2&#123;<span class="number">100</span>, <span class="number">1</span>&#125;; <span class="comment">// å¤§å°ä¸º2 åˆ†åˆ«æ˜¯100å’Œ1</span></span><br></pre></td></tr></table></figure>
<p>æœ€åè¿˜æœ‰è¿­ä»£å™¨åˆå§‹åŒ–, æ¯”å¦‚æƒ³è¦æ‹·è´vec1çš„æ‰€æœ‰å…ƒç´ ä¹Ÿå¯ä»¥:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">vec2</span><span class="params">(vec1.begin(), vec1.end())</span></span>;</span><br></pre></td></tr></table></figure>
<p>åæ­£åªè¦æ˜¯è¿­ä»£å™¨ç±»å‹å°±å¯ä»¥, è¿­ä»£å™¨æœ¬èº«ä¹Ÿå¯ä»¥ä»»æ„ç§»åŠ¨, å¯ä»¥æ‹·è´æŸä¸€ä¸ªåŒºé—´ä¹Ÿèƒ½å¤Ÿåšåˆ°.</p>
<p>è¿™é‡Œå¯ä»¥è¿›ä¸€æ­¥ä½“ä¼šåˆ°, è¿­ä»£å™¨æ˜¯STLçš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†. å®ƒèµ·åˆ°äº†ç»“åˆç®—æ³•å’Œå®¹å™¨çš„ä½œç”¨, ä¸çŸ¥é“æœ‰æ²¡æœ‰æ³¨æ„åˆ°è¿™é‡Œå¹¶æ²¡æœ‰é™å®šè¿­ä»£å™¨çš„æ¥å†, ä¹Ÿå°±æ˜¯è¯´, Listçš„è¿­ä»£å™¨èƒ½å¦ç”¨äºvecçš„æ„é€ å‡½æ•°å‘¢? ç­”æ¡ˆæ˜¯è‚¯å®šçš„.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    list&lt;<span class="type">int</span>&gt; lst1&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">vec1</span><span class="params">(lst1.begin(), lst1.end())</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span> &amp;i : vec1) &#123;</span><br><span class="line">        cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡º:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯æ¯”æŒ‡é’ˆä¼˜è¶Šçš„åœ°æ–¹, è¿­ä»£å™¨å°±åƒæ˜¯èƒ¶æ°´ä¸€æ ·è¿æ¥ç€æ•´ä¸ªSTL.</p>
<h3 id="access"><a class="markdownIt-Anchor" href="#access"></a> access</h3>
<p>ä¸‹é¢æ¥çœ‹è®¿é—®vectorçš„æˆå‘˜å‡½æ•°.</p>
<p>data()æˆå‘˜å‡½æ•°å·²ç»å±•ç°è¿‡ä½œç”¨äº†, åœ¨ä¸Šé¢å¯ä»¥çœ‹åˆ°å¯ä»¥é€šè¿‡ä¼ ç»ŸCæŒ‡é’ˆè®¿é—®æ•°æ®. å½“ç„¶ä¹Ÿæ˜¯å¾ˆå±é™©çš„.</p>
<p>ä¸‹é¢æ¥çœ‹atå’Œoperator[].</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; vec1&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">    cout &lt;&lt; vec1[<span class="number">3</span>] &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; vec1[<span class="number">4</span>] &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; vec1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡º:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">0</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¾ç„¶æ˜¯é”™è¯¯çš„, é¦–å…ˆè¿™ä¸ªvec1æœ€å¤šåªæœ‰ä¸‰ä¸ªæ•°å­—, è¿™ä¸ªæ—¶å€™è®¿é—®ä¸‹æ ‡ä¸º3å°±æ˜¯æ˜¾ç„¶è¶Šç•Œäº†, æˆ‘è¿™è¾¹è¾“å‡ºæ˜¯0. å¯ä»¥çœ‹è§capacityç”šè‡³éƒ½æ˜¯3! ä¹Ÿå°±æ˜¯è¿™ä¸€ç‰‡ç©ºé—´æ ¹æœ¬å°±ä¸æ˜¯vector! cppreferå¦‚æ˜¯è¯´:</p>
<blockquote>
<p>Returns a reference to the element at specified locationÂ pos. No bounds checking is performed.</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯ä¸çŸ¥ä¸è§‰å°±è¶Šç•Œäº†. é‚£ä¹ˆatå°±æœ‰ä½œç”¨äº†:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; vec1&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">    cout &lt;&lt; vec1.<span class="built_in">at</span>(<span class="number">3</span>) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; vec1.<span class="built_in">at</span>(<span class="number">4</span>) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; vec1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡º:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">terminate called after throwing an instance of &#x27;std::out_of_range&#x27;</span><br><span class="line">  what():  vector::_M_range_check: __n (which is 3) &gt;= this-&gt;size() (which is 3)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä¸ä»…æŠ¥å‡ºäº†è¶Šç•Œ<code>std::out_of_range</code>, è¿˜æŠ¥å‡ºæ›´å¤šæœ‰ç”¨çš„ä¿¡æ¯, sizeæ˜¯3, ä½ ä¸‹æ ‡ä¹Ÿæ˜¯3. è™½ç„¶æ²¡æœ‰æŠ¥å‡ºå…·ä½“çš„è¡Œæ•°, ä½†æ˜¯ä¹Ÿæ˜¯æ¯”åŸæ¥èƒ½å¤Ÿæ­£å¸¸ç¼–è¯‘è¿è¡Œå¥½å¤šäº†.</p>
<p>åœ¨referenceçš„accessç•Œé¢, è¿˜æœ‰front()å’Œback()ä¸¤ä¸ªæ–¹æ³•ç”¨äºè®¿é—®æœ€å‰é¢çš„æ•°æ®å’Œæœ€åé¢çš„æ•°æ®, å°±æ²¡æœ‰ä»€ä¹ˆåˆ«çš„æ³¨æ„ç‚¹.</p>
<h3 id="iterators"><a class="markdownIt-Anchor" href="#iterators"></a> iterators</h3>
<p>æˆå‘˜å‡½æ•°çœç•¥äº†æ‹¬å·!</p>
<p>begin, cbegin, end, cend, å››ä¸ªæˆå‘˜å‡½æ•°è¿”å›è¿­ä»£å™¨. beginå°±æ˜¯å¼€å§‹è¿­ä»£å™¨, endå°±æ˜¯ç»“å°¾è¿­ä»£å™¨, æ³¨æ„å·¦é—­å³å¼€, ä¹Ÿå°±æ˜¯beginè¿”å›çš„è¿­ä»£å™¨æ˜¯æŒ‡å‘å¤´å…ƒç´ çš„, è€ŒendæŒ‡å‘çš„å´æ˜¯å°¾å…ƒç´ è¿˜è¦å¾€åä¸€ä½, æ²¡æœ‰å…ƒç´ .</p>
<p>å·ä¸€ä¸ªreferçš„å›¾.<br />
<img src="https://upload.cppreference.com/mwiki/images/1/1b/range-begin-end.svg" alt="" /></p>
<p>cå¼€å¤´å°±æ˜¯const.</p>
<p>ç„¶åè¿˜æœ‰rbegin, rend, crbegin, crendç­‰è¿­ä»£å™¨. å°±æ˜¯åè¿‡æ¥è¿­ä»£.</p>
<p><img src="https://upload.cppreference.com/mwiki/images/3/39/range-rbegin-rend.svg" alt="" /></p>
<p>å†å·ä¸€ä¸ªå›¾.</p>
<h3 id="modifiers"><a class="markdownIt-Anchor" href="#modifiers"></a> modifiers</h3>
<p>clear()æ–¹æ³•, æ¸…é™¤æ‰€æœ‰size(), ä¸å½±å“capacity, æ¢å¥è¯æ¥è¯´å°±æ˜¯ä¸ä¼šé‡Šæ”¾vectoræŒç®¡çš„å†…å­˜.</p>
<p>insert(), ç›¸å½“æœ‰ç”¨çš„æˆå‘˜å‡½æ•°. æ•´ä¸ªinsertå‡½æ•°æœ‰äº”ä¸ªé‡è½½, éƒ½éå¸¸å¸¸ç”¨.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨poså‰é¢æ’å…¥value</span></span><br><span class="line"><span class="function">iterator <span class="title">insert</span><span class="params">( const_iterator pos, <span class="type">const</span> T&amp; value )</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> iterator <span class="title">insert</span><span class="params">( const_iterator pos, <span class="type">const</span> T&amp; value )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨poså‰é¢æ’å…¥value</span></span><br><span class="line"><span class="function">iterator <span class="title">insert</span><span class="params">( const_iterator pos, T&amp;&amp; value )</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> iterator <span class="title">insert</span><span class="params">( const_iterator pos, T&amp;&amp; value )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// poså‰é¢æ’å…¥countä¸ªvalue</span></span><br><span class="line"><span class="function">iterator <span class="title">insert</span><span class="params">( const_iterator pos, size_type count, <span class="type">const</span> T&amp; value )</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> iterator</span></span><br><span class="line"><span class="function">    <span class="title">insert</span><span class="params">( const_iterator pos, size_type count, <span class="type">const</span> T&amp; value )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// poså‰é¢æ’å…¥[first, last)ä¹‹é—´çš„å…ƒç´ </span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt; <span class="keyword">class</span> InputIt &gt;</span></span><br><span class="line"><span class="function">iterator <span class="title">insert</span><span class="params">( const_iterator pos, InputIt first, InputIt last )</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt; <span class="keyword">class</span> InputIt &gt;</span></span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> iterator <span class="title">insert</span><span class="params">( const_iterator pos, InputIt first, InputIt last )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// poså‰é¢æ’å…¥initializer_list</span></span><br><span class="line"><span class="function">iterator <span class="title">insert</span><span class="params">( const_iterator pos, std::initializer_list&lt;T&gt; ilist )</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> iterator <span class="title">insert</span><span class="params">( const_iterator pos,</span></span></span><br><span class="line"><span class="params"><span class="function">                           std::initializer_list&lt;T&gt; ilist )</span></span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨cppreferenceé‡Œé¢ä¹Ÿæœ‰ç¤ºä¾‹ä»£ç , é‡Œé¢éƒ½æ˜¯ä½¿ç”¨æ„é€ å‡½æ•°çš„ä¾‹å­:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">int</span> id, <span class="type">const</span> std::vector&lt;<span class="type">int</span>&gt;&amp; container)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; id &lt;&lt; <span class="string">&quot;. &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> <span class="type">int</span> x : container)</span><br><span class="line">        std::cout &lt;&lt; x &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">std::vector&lt;<span class="type">int</span>&gt; <span class="title">c1</span><span class="params">(<span class="number">3</span>, <span class="number">100</span>)</span></span>;</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>, c1);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">auto</span> it = c1.<span class="built_in">begin</span>();</span><br><span class="line">    it = c1.<span class="built_in">insert</span>(it, <span class="number">200</span>);</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">2</span>, c1);</span><br><span class="line"> </span><br><span class="line">    c1.<span class="built_in">insert</span>(it, <span class="number">2</span>, <span class="number">300</span>);</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">3</span>, c1);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// `it` no longer valid, get a new one:</span></span><br><span class="line">    it = c1.<span class="built_in">begin</span>();</span><br><span class="line"> </span><br><span class="line">    <span class="function">std::vector&lt;<span class="type">int</span>&gt; <span class="title">c2</span><span class="params">(<span class="number">2</span>, <span class="number">400</span>)</span></span>;</span><br><span class="line">    c1.<span class="built_in">insert</span>(std::<span class="built_in">next</span>(it, <span class="number">2</span>), c2.<span class="built_in">begin</span>(), c2.<span class="built_in">end</span>());</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">4</span>, c1);</span><br><span class="line"> </span><br><span class="line">    <span class="type">int</span> arr[] = &#123;<span class="number">501</span>, <span class="number">502</span>, <span class="number">503</span>&#125;;</span><br><span class="line">    c1.<span class="built_in">insert</span>(c1.<span class="built_in">begin</span>(), arr, arr + std::<span class="built_in">size</span>(arr));</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">5</span>, c1);</span><br><span class="line"> </span><br><span class="line">    c1.<span class="built_in">insert</span>(c1.<span class="built_in">end</span>(), &#123;<span class="number">601</span>, <span class="number">602</span>, <span class="number">603</span>&#125;);</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">6</span>, c1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸çŸ¥é“æœ‰æ²¡æœ‰äººæ„Ÿè§‰åˆ°ä¸€ä¸ªç–‘é—®, æ—¢ç„¶insertçš„ä¸€ä¸ªé‡è½½çš„ä¸€ä¸ªå‡½æ•°é‡Œé¢, æ¥å—çš„å‚æ•°ç±»å‹(å…¶ä¸­ä¸€ä¸ª)ä¸ºä»€ä¹ˆä¼šæ˜¯const T&amp;, insertçš„æ—¶å€™, vectorå†…éƒ¨å­˜çš„ä¸€ç›´å°±æ˜¯æŸä¸ªå…ƒç´ çš„å‰¯æœ¬è€Œä¸æ˜¯å¼•ç”¨æˆ–å…¶æœ¬èº«. å†™æˆå¼•ç”¨åªæ˜¯ä¸ºäº†æ–¹ä¾¿ä¼ å‚, è¿™æ ·ä¼ å‚çš„æ—¶å€™å¯ä»¥çœä¸‹ä¸€æ¬¡æ‹·è´.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> _Tp, <span class="keyword">typename</span> _Alloc&gt;</span><br><span class="line">    <span class="keyword">typename</span> vector&lt;_Tp, _Alloc&gt;::iterator</span><br><span class="line">    vector&lt;_Tp, _Alloc&gt;::</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> __cplusplus &gt;= 201103L</span></span><br><span class="line">    <span class="built_in">insert</span>(const_iterator __position, <span class="type">const</span> value_type&amp; __x)</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    <span class="built_in">insert</span>(iterator __position, <span class="type">const</span> value_type&amp; __x)</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="type">const</span> size_type __n = __position - <span class="built_in">begin</span>();</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;_M_impl._M_finish != <span class="keyword">this</span>-&gt;_M_impl._M_end_of_storage)</span><br><span class="line">	<span class="keyword">if</span> (__position == <span class="built_in">end</span>())</span><br><span class="line">	  &#123;</span><br><span class="line">	    _GLIBCXX_ASAN_ANNOTATE_GROW(<span class="number">1</span>);</span><br><span class="line">	    _Alloc_traits::<span class="built_in">construct</span>(<span class="keyword">this</span>-&gt;_M_impl, <span class="keyword">this</span>-&gt;_M_impl._M_finish,</span><br><span class="line">				     __x);</span><br><span class="line">	    ++<span class="keyword">this</span>-&gt;_M_impl._M_finish;</span><br><span class="line">	    _GLIBCXX_ASAN_ANNOTATE_GREW(<span class="number">1</span>);</span><br><span class="line">	  &#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	  &#123;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> __cplusplus &gt;= 201103L</span></span><br><span class="line">	    <span class="type">const</span> <span class="keyword">auto</span> __pos = <span class="built_in">begin</span>() + (__position - <span class="built_in">cbegin</span>());</span><br><span class="line">	    <span class="comment">// __x could be an existing element of this vector, so make a</span></span><br><span class="line">	    <span class="comment">// copy of it before _M_insert_aux moves elements around.</span></span><br><span class="line">	    _Temporary_value __x_copy(<span class="keyword">this</span>, __x);</span><br><span class="line">	    _M_insert_aux(__pos, std::<span class="built_in">move</span>(__x_copy._M_val()));</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">	    _M_insert_aux(__position, __x);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">	  &#125;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> __cplusplus &gt;= 201103L</span></span><br><span class="line">	_M_realloc_insert(<span class="built_in">begin</span>() + (__position - <span class="built_in">cbegin</span>()), __x);</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">	_M_realloc_insert(__position, __x);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">iterator</span>(<span class="keyword">this</span>-&gt;_M_impl._M_start + __n);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>åœ¨æºä»£ç ä¸­, è¿˜ç‰¹æ„æ³¨é‡Šäº†è¿™ä¸€ç‚¹. ç”šè‡³è¿™ä¸ªå‡½æ•°çœ‹ä¸Šå»å¾ˆä¹±, å› ä¸ºå„ä¸ªæ ‡å‡†éƒ½ä¸ä¸€æ ·.</p>
<h2 id="deque"><a class="markdownIt-Anchor" href="#deque"></a> deque</h2>
<p>double-ended queue. ä¹Ÿç»å¸¸ç¿»è¯‘æˆåŒç«¯é˜Ÿåˆ—. æˆ‘ä»¬è¿˜æ˜¯çœ‹æ—¶é—´å¤æ‚åº¦:</p>
<blockquote>
<p>The complexity (efficiency) of common operations on deques is as follows:</p>
<ul>
<li>Random access - constantÂ O(1).</li>
<li>Insertion or removal of elements at the end or beginning - constantÂ O(1).</li>
<li>Insertion or removal of elements - linearÂ O(n).</li>
</ul>
<p><code>std::deque</code>Â meets the requirements ofÂ Container,Â AllocatorAwareContainer,Â SequenceContainerÂ andÂ ReversibleContainer.</p>
</blockquote>
<p>éšæœºè®¿é—®æ—¶é—´å¤æ‚åº¦O(1), åœ¨å¤´éƒ¨å°¾éƒ¨éƒ½æ˜¯O(1), ä¸­é—´æ˜¯çº¿æ€§çš„.</p>
<p>å›é¡¾ä¸€ä¸‹vectorçš„, vectorå‡ ä¹å’Œè¿™ä¸ªå·®ä¸å¤š, ä¹Ÿæ˜¯éšæœºè®¿é—®O(1), ä¸­é—´æ’å…¥O(n), ä½†æ˜¯åªæ˜¯åœ¨æœ«å°¾æ’å…¥æ˜¯å¸¸æ•°å¤æ‚åº¦, å¤´éƒ¨æ’å…¥æ˜¯O(n). è¿™æ ·çœ‹æ¥å¥½åƒdequeå…¨é¢ä¼˜äºvector?</p>
<p>dequeçš„å†…å­˜åˆ†å¸ƒæ˜¯ä¸€ç³»åˆ—å›ºå®šé•¿åº¦çš„å†…å­˜å°å—, ç„¶åç»„åˆèµ·æ¥.</p>
<p><img src="https://pic.imgdb.cn/item/65274551c458853aefaf3969.png" alt="" /></p>
<p>ä»è¿™ä¸ªå›¾ä¹Ÿå¯ä»¥å¾ˆç›´è§‚åœ°çœ‹å‡ºæ¥, æ— è®ºæ˜¯åœ¨å¤´éƒ¨åˆ é™¤è¿˜æ˜¯åœ¨å°¾éƒ¨åˆ é™¤éƒ½æ˜¯å¸¸æ•°. ä¸»è¦æ˜¯åœ¨ä¸¤ç«¯é¢„ç•™ç©ºé—´, å…¶å®å¾ˆæœ‰é“¾è¡¨çš„ç‰¹è‰². ä¾‹å¦‚æˆ‘å¦‚æœåˆ é™¤ä¸€ä¸ªå…ƒç´ , åªéœ€è¦æŠŠbeginå¾€åæ‹¨ä¸€ä½.</p>
<p>å…¶å®å’Œé“¾è¡¨éå¸¸ç›¸ä¼¼, é‚£ä¹ˆè¿™ä¸ªå¤´å°¾æ—¶é—´å¤æ‚åº¦ä¸ºO(1)åè€Œä¸è¶³ä¸ºå¥‡, åè€Œéœ€è¦é—®é—®æ˜¯éšæœºè®¿é—®å¦‚ä½•åšåˆ°O(1)çš„.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">_Tp</span>, <span class="keyword">class</span> <span class="title class_">_Allocator</span>&gt;</span><br><span class="line"><span class="keyword">inline</span></span><br><span class="line"><span class="keyword">typename</span> deque&lt;_Tp, _Allocator&gt;::reference</span><br><span class="line">deque&lt;_Tp, _Allocator&gt;::<span class="keyword">operator</span>[](size_type __i) _NOEXCEPT</span><br><span class="line">&#123;</span><br><span class="line">    size_type __p = __start_ + __i;</span><br><span class="line">    <span class="keyword">return</span> *(*(__map_.<span class="built_in">begin</span>() + __p / __block_size) + __p % __block_size);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢è®¿é—®ä¸‹æ ‡ä¸ºiçš„å†…å®¹, é¦–å…ˆå…ˆç®—å‡ºp, ç­‰äºstart+i. è¿™æ˜¯æˆ‘ä»¬å¸Œæœ›çš„ä½ç½®, ä½†æ˜¯å¦‚ä½•å¿«é€Ÿè·³è½¬å‘¢? å¦‚æœæ˜¯é“¾è¡¨, æ˜¯ä¸æ˜¯å°±å¾—ä¸æ–­åœ°å¾€åè·³è½¬, è¿­ä»£å™¨ä¸€ä½ä¸€ä½å¾€ånextå¾—åˆ°ç»“æœ. ä½†æ˜¯æˆ‘ä»¬æ³¨æ„è¿™é‡Œdequeçš„åšæ³•.</p>
<p>å…ˆé€šè¿‡map.begin()åŠ ä¸Š p/block_sizeè·å–å¯¹åº”chunkçš„è¿­ä»£å™¨. ä¾‹å¦‚åœ¨ä¸Šå›¾ä¸­æˆ‘ä»¬è®¿é—®ä¸‹æ ‡ä¸º6, å› ä¸ºä¸€ä¸ªå—æ˜¯5, æ‰€ä»¥éœ€è¦mapçš„è¿­ä»£å™¨å¾€å‰ä¸€ä½, æŒ‡å‘chunk1. ç„¶åå–ä½™å¾—åˆ°æ˜¯1, ä¹Ÿå°±æ˜¯è¯´<code>*(__map_.begin() + __p / __block_size)</code>å°±æ˜¯chunk1è¿™ä¸ªæ•°ç»„, æˆ–è€…è¯´æ˜¯å…¶é¦–åœ°å€. ç„¶åå†æ¥çœ‹, æœ€å¼€å§‹æ˜¯startæŒ‡å‘2, å› ä¸º<code>data[0]</code>æ˜¯æŒ‡å‘æ‰€åœ¨æ•°ç»„çš„ä¸‹æ ‡2, 2åŠ ä¸Š6ä¸º8, 8å–æ¨¡5æ˜¯3. ä¹Ÿå°±æ˜¯è¯´éœ€è¦è®¿é—®çš„å…ƒç´ æ˜¯åœ¨å½“å‰æ•°ç»„çš„ç¬¬ä¸‰ä½.</p>
<p>æ€»ç»“æ¥çœ‹. è®¿é—®çš„ä¸‹æ ‡iåŠ ä¸Šæœ€å¼€å§‹å…ƒç´ æ‰€åœ¨chunkçš„ä¸‹æ ‡startå…±åŒç»„æˆäº†ä¸€ä¸ªp, è¿™ä¸ªpå’Œchunk_sizeé™¤æ³•çš„éƒ¨åˆ†ç”¨æ¥è·³è½¬å—, å–æ¨¡çš„éƒ¨åˆ†ç”¨æ¥æ ‡è¯†å—ä¹Ÿå°±æ˜¯chunkæ•°ç»„çš„ä¸‹æ ‡.</p>
<p>ç›¸æ¯”è¾ƒè€Œè¨€, åŒæ ·éƒ½æ˜¯O(1)çš„random access, vectorçš„O(1)çœ‹ä¸Šå»è¿˜æ˜¯æ›´åŠ O(1)ä¸€äº›.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;_Tp, _Allocator&gt;::<span class="keyword">operator</span>[](size_type __n) _NOEXCEPT</span><br><span class="line">&#123;</span><br><span class="line">    _LIBCPP_ASSERT_VALID_ELEMENT_ACCESS(__n &lt; <span class="built_in">size</span>(), <span class="string">&quot;vector[] index out of bounds&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;__begin_[__n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é¢˜å¤–è¯: dequeåªæ˜¯è§„å®šäº†è¡Œä¸º, è‡³äºå…·ä½“å®ç°, è¿˜å¾—çœ‹å„ä¸ªç¼–è¯‘å™¨çš„å®ç°. è€Œä¸”è¿˜æœ‰ä¸ªå¾ˆæœ‰æ„æ€çš„ç‚¹å°±æ˜¯å¯¹äº<code>operator[]</code>çš„å®ç°, å¯ä»¥çœ‹è§libcxxé‡Œé¢æ˜¯æœ‰ä¸€ä¸ªå†…å­˜æ£€æŸ¥çš„, è€Œä¸‹é¢æ˜¯libstdc++çš„:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// libstdc++</span></span><br><span class="line">  _GLIBCXX_NODISCARD _GLIBCXX20_CONSTEXPR</span><br><span class="line">  reference</span><br><span class="line">  <span class="keyword">operator</span>[](size_type __n) _GLIBCXX_NOEXCEPT</span><br><span class="line">  &#123;</span><br><span class="line">__glibcxx_requires_subscript(__n);</span><br><span class="line"><span class="keyword">return</span> *(<span class="keyword">this</span>-&gt;_M_impl._M_start + __n);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>ä¼¼ä¹æ²¡æœ‰æ£€æŸ¥. æœ¬æ¥ä¸Šé¢è¯´è¿‡atæœ‰æ£€æŸ¥, ä½†æ˜¯libcxxä¼¼ä¹ä¸‹æ ‡è®¿é—®ä¹Ÿä¼šæ£€æŸ¥. è¿˜æ²¡æœ‰å®æµ‹clang++æ­é…libc++çš„æŠ¥é”™æƒ…å†µ.</p>
<p>dequeçš„æˆå‘˜å‡½æ•°æ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„. å’Œvectoræ¯”è¾ƒç±»ä¼¼.</p>
<h2 id="forward_listc11"><a class="markdownIt-Anchor" href="#forward_listc11"></a> forward_list(c++11)</h2>
<blockquote>
<p>std::forward_list is a container that supports fast insertion and removal of elements from anywhere in the container. Fast random access is not supported. It is implemented as a singly-linked list. Compared to std::list this container provides more space efficient storage when bidirectional iteration is not needed.</p>
</blockquote>
<p>è¿™ä¸€ä¸ªå°±ç•¥è¿‡, è¿™ä¸ªåªæ˜¯ä¸€ä¸ªæ›´åŠ &quot;more space efficient&quot;çš„list. ç”±C++11å¼•å…¥.</p>
<h2 id="list"><a class="markdownIt-Anchor" href="#list"></a> list</h2>
<p>å…¶å®STLçš„å¾ˆå¤šæˆå‘˜å‡½æ•°éƒ½å¤§å·®ä¸å·®, æ‰€ä»¥ä¸‹é¢åªè¯´æ˜ä¸€ä¸‹æ¯”è¾ƒæœ‰æ–°æ„çš„ä¸€äº›æˆå‘˜å‡½æ•°.</p>
<p>åœ¨operationä¸€æ é‡Œé¢, æœ‰ä¸€äº›å¾ˆæœ‰æ„æ€çš„å‡½æ•°.</p>
<h3 id="removeå’Œremove_if"><a class="markdownIt-Anchor" href="#removeå’Œremove_if"></a> remove()å’Œremove_if()</h3>
<p>å¯¹äºä¸€ä¸ªlist, removeå°±æ˜¯åˆ é™¤æ‰€æœ‰å’Œå‚æ•°ä¸€æ ·çš„å…ƒç´ å˜›, è¿™ä¸ªremove_ifå°±å¾ˆé…·ç‚«, å®ƒçš„å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªlambdaè¡¨è¾¾å¼:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// referenceçš„ç¤ºä¾‹ä»£ç </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::list&lt;<span class="type">int</span>&gt; l = &#123;<span class="number">1</span>, <span class="number">100</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">10</span>, <span class="number">1</span>, <span class="number">11</span>, <span class="number">-1</span>, <span class="number">12</span>&#125;;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">auto</span> count1 = l.<span class="built_in">remove</span>(<span class="number">1</span>);</span><br><span class="line">    std::cout &lt;&lt; count1 &lt;&lt; <span class="string">&quot; elements equal to 1 were removed\n&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">auto</span> count2 = l.<span class="built_in">remove_if</span>([](<span class="type">int</span> n)&#123; <span class="keyword">return</span> n &gt; <span class="number">10</span>; &#125;);</span><br><span class="line">    std::cout &lt;&lt; count2 &lt;&lt; <span class="string">&quot; elements greater than 10 were removed\n&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Finally, the list contains: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> n : l)</span><br><span class="line">        std::cout &lt;&lt; n &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥æ ¹æ®å‡½æ•°çš„è¦æ±‚æ¥åˆ é™¤å…ƒç´ . å…¶ä»–çš„å°±ä¸èµ˜è¿°äº†, æ¥ä¸‹æ¥ä¹Ÿæ˜¯é‡å¤´æˆ, associative container.</p>
<h1 id="associative-containers"><a class="markdownIt-Anchor" href="#associative-containers"></a> Associative containers</h1>
<h2 id="set"><a class="markdownIt-Anchor" href="#set"></a> set</h2>
<blockquote>
<p>std::set is an associative container that contains a sorted set of unique objects of type Key. Sorting is done using the key comparison function Compare. Search, removal, and insertion operations have logarithmic complexity. Sets are usually implemented as Redâ€“black trees.</p>
</blockquote>
<p>å¯¹äºsetæ¥è¯´, search, removal, insertionéƒ½å«æœ‰&quot;logarithmic complexity&quot;ä¹Ÿå°±æ˜¯O(logn)çš„å¤æ‚åº¦. è€Œä¸”ç»å¸¸ä½¿ç”¨çº¢é»‘æ ‘æ¥å®ç°.</p>
<p>æ‰€ä»¥ä¸å…¶è¯´å­¦ä¹ set, ä¸å¦‚è¯´éœ€è¦äº†è§£çº¢é»‘æ ‘çš„æ€§è´¨, ä¸ç„¶çš„è¯æ²¡æœ‰åŠæ³•èƒ½å¤Ÿäº†è§£æ—¶é—´å¤æ‚åº¦å’Œsetçš„ä¼˜ç¼ºç‚¹ä»ä½•è€Œæ¥.</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/study/" rel="tag"># study</a>
              <a href="/tags/cpp/" rel="tag"># cpp</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/09/13/CPP%E4%B8%AD%E7%9A%84cin%E5%92%8Ccout%E8%BF%90%E8%A1%8C%E7%BC%93%E6%85%A2/" rel="prev" title="CPPä¸­çš„cinå’Œcoutè¿è¡Œç¼“æ…¢">
                  <i class="fa fa-angle-left"></i> CPPä¸­çš„cinå’Œcoutè¿è¡Œç¼“æ…¢
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2023/10/14/gdb%E4%BB%8E%E6%97%A0%E7%9F%A5%E5%88%B0%E8%83%BD%E7%94%A8/" rel="next" title="gdbä»æ— çŸ¥åˆ°èƒ½ç”¨">
                  gdbä»æ— çŸ¥åˆ°èƒ½ç”¨ <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">wonderlandKid</span>
  </div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" integrity="sha256-3574TpfThVfeAhg+I4+N39EJiLN3QUkuEsMVe8hWAR4=" crossorigin="anonymous">



</body>
</html>
